const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dfahi4jC.js","assets/index-DKLd-k0G.js","assets/index-D4t2-_c2.css"])))=>i.map(i=>d[i]);
import{_ as $n,g as Di}from"./index-DKLd-k0G.js";function Oi(t){const e=t.signer,r=t.signer,n=Object.assign(t,{eventSigner:e,messageSigner:r}),s=n.eventStreamPayloadHandlerProvider(n);return Object.assign(n,{eventStreamPayloadHandler:s})}const Mi=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),Ii=t=>({httpHandler:t.httpHandler()});var He;(function(t){t.HTTP="http",t.HTTPS="https"})(He||(He={}));var lt;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(lt||(lt={}));const Wt="__smithy_context";class B{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new B({...e,headers:{...e.headers}});return r.query&&(r.query=Bi(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return B.clone(this)}}function Bi(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}class me{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const ki=t=>e=>async r=>{if(!B.isInstance(r.request))return e(r);const{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},Pi={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},_i=t=>({applyToStack:e=>{e.add(ki(t),Pi)}}),$i=()=>(t,e)=>async r=>{try{const n=await t(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??e.inputFilterSensitiveLog,d=u??e.outputFilterSensitiveLog,{$metadata:h,...p}=n.output;return o?.info?.({clientName:s,commandName:i,input:l(r.input),output:d(p),metadata:h}),n}catch(n){const{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},Ni={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Fi=t=>({applyToStack:e=>{e.add($i(),Ni)}}),Ui={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Li=()=>t=>async e=>t(e),Hi=t=>({applyToStack:e=>{e.add(Li(),Ui)}}),ve=t=>t[Wt]||(t[Wt]={}),te=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},zi=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const n of e)for(const s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(const n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r};function ji(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const qi=(t,e)=>(r,n)=>async s=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=zi(i,o),c=ji(t.httpAuthSchemes),u=ve(n),l=[];for(const d of a){const h=c.get(d.schemeId);if(!h){l.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}const p=h.identityProvider(await e.identityProviderConfigProvider(t));if(!p){l.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:f={},signingProperties:y={}}=d.propertiesExtractor?.(t,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},f),d.signingProperties=Object.assign(d.signingProperties||{},y),u.selectedHttpAuthScheme={httpAuthOption:d,identity:await p(d.identityProperties),signer:h.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(s)},Wi={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Vi=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(qi(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),Wi)}}),Ji={name:"serializerMiddleware"},Gi=t=>e=>{throw e},Ki=(t,e)=>{},Xi=t=>(e,r)=>async n=>{if(!B.isInstance(n.request))return e(n);const i=ve(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await e({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||Gi)(o));return(c.successHandler||Ki)(u.response,o),u},Qi={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Zi=t=>({applyToStack:e=>{e.addRelativeTo(Xi(),Qi)}}),Ne=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},Nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ar=Object.entries(Nn).reduce((t,[e,r])=>(t[r]=Number(e),t),{}),Yi=Nn.split(""),Ce=6,Fe=8,eo=63,Te=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const r=new ArrayBuffer(e),n=new DataView(r);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let u=s,l=s+3;u<=l;u++)if(t[u]!=="="){if(!(t[u]in Ar))throw new TypeError(`Invalid character ${t[u]} in base64 string.`);i|=Ar[t[u]]<<(l-u)*Ce,o+=Ce}else i>>=Ce;const a=s/4*3;i>>=o%Fe;const c=Math.floor(o/Fe);for(let u=0;u<c;u++){const l=(c-u-1)*Fe;n.setUint8(a+u,(i&255<<l)>>l)}}return new Uint8Array(r)},ge=t=>new TextEncoder().encode(t),ze=t=>typeof t=="string"?ge(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),De=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function ye(t){let e;typeof t=="string"?e=ge(t):e=t;const r=typeof e=="object"&&typeof e.length=="number",n=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let u=i,l=Math.min(i+3,e.length);u<l;u++)o|=e[u]<<(l-u-1)*Fe,a+=Fe;const c=Math.ceil(a/Ce);o<<=c*Ce-a;for(let u=1;u<=c;u++){const l=(c-u)*Ce;s+=Yi[(o&eo<<l)>>l]}s+="==".slice(0,4-c)}return s}class fe extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?fe.mutate(Te(e)):fe.mutate(ge(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,fe.prototype),e}transformToString(e="utf-8"){return e==="base64"?ye(this):De(this)}}const Rr=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream),he=t=>encodeURIComponent(t).replace(/[!'()*]/g,to),to=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Fn(t){const e=[];for(let r of Object.keys(t).sort()){const n=t[r];if(r=he(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${he(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${he(n)}`),e.push(s)}}return e.join("&")}function vr(t,e){return new Request(t,e)}function ro(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{const n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}const Ot={supported:void 0};class je{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new je(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Ot.supported===void 0&&(Ot.supported=typeof Request<"u"&&"keepalive"in vr("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);const s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){const S=new Error("Request aborted");return S.name="AbortError",Promise.reject(S)}let a=e.path;const c=Fn(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){const S=e.username??"",E=e.password??"";u=`${S}:${E}@`}const{port:l,method:d}=e,h=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,p=d==="GET"||d==="HEAD"?void 0:e.body,f={body:p,headers:new Headers(e.headers),method:d,credentials:o};this.config?.cache&&(f.cache=this.config.cache),p&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=r),Ot.supported&&(f.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(e));let y=()=>{};const g=vr(h,f),w=[fetch(g).then(S=>{const E=S.headers,x={};for(const D of E.entries())x[D[0]]=D[1];return S.body!=null?{response:new me({headers:x,reason:S.statusText,statusCode:S.status,body:S.body})}:S.blob().then(D=>({response:new me({headers:x,reason:S.statusText,statusCode:S.status,body:D})}))}),ro(s)];return r&&w.push(new Promise((S,E)=>{const x=()=>{const A=new Error("Request aborted");A.name="AbortError",E(A)};if(typeof r.addEventListener=="function"){const A=r;A.addEventListener("abort",x,{once:!0}),y=()=>A.removeEventListener("abort",x)}else r.onabort=x})),Promise.race(w).finally(y)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}}const Un=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):no(t):so(t);async function no(t){const e=await io(t),r=Te(e);return new Uint8Array(r)}async function so(t){const e=[],r=t.getReader();let n=!1,s=0;for(;!n;){const{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}const i=new Uint8Array(s);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i}function io(t){return new Promise((e,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}const Ln={},Vt={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Ln[t]=e,Vt[e]=t}function rr(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const n=t.slice(r,r+2).toLowerCase();if(n in Vt)e[r/2]=Vt[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function k(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Ln[t[r]];return e}const Dr="The stream has already been transformed.",oo=t=>{if(!Or(t)&&!Rr(t)){const s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1;const r=async()=>{if(e)throw new Error(Dr);return e=!0,await Un(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{const i=await r();if(s==="base64")return ye(i);if(s==="hex")return k(i);if(s===void 0||s==="utf8"||s==="utf-8")return De(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(Dr);if(e=!0,Or(t))return n(t);if(Rr(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},Or=t=>typeof Blob=="function"&&t instanceof Blob,$e=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return fe.mutate(t);if(!t)return fe.mutate(new Uint8Array);const r=e.streamCollector(t);return fe.mutate(await r)};function Mr(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const Mt=t=>typeof t=="function"?t():t,Hn=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s}),ao=t=>(e,r)=>async n=>{const{response:s}=await e(n),{operationSchema:i}=ve(r),[,o,a,c,u,l]=i??[];try{const d=await t.protocol.deserializeResponse(Hn(o,a,c,u,l),{...t,...r},s);return{response:s,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in d)){const h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(me.isInstance(s)){const{headers:p={}}=s,f=Object.entries(p);d.$metadata={httpStatusCode:s.statusCode,requestId:It(/^x-[\w-]+-request-?id$/,f),extendedRequestId:It(/^x-[\w-]+-id-2$/,f),cfId:It(/^x-[\w-]+-cf-id$/,f)}}}catch{}}throw d}},It=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],co=t=>(e,r)=>async n=>{const{operationSchema:s}=ve(r),[,i,o,a,c,u]=s??[],l=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,d=await t.protocol.serializeRequest(Hn(i,o,a,c,u),n.input,{...t,...r,endpoint:l});return e({...n,request:d})},uo={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},lo={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function fo(t){return{applyToStack:e=>{e.add(co(t),lo),e.add(ao(t),uo),t.protocol.setSerdeContext(t)}}}function Ee(t){if(typeof t=="object")return t;t=t|0;const e={};let r=0;for(const n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}class T{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=T.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;const n=[];let s=e,i=e;for(this._isMemberSchema=!1;Bt(s);)n.push(s[1]),s=s[0],i=Mt(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){const a=n[o];Object.assign(this.memberTraits,Ee(a))}}else this.memberTraits=0;if(i instanceof T){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Mt(i),ho(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){const r=Mt(e);if(r instanceof T)return r;if(Bt(r)){const[n,s]=r;if(n instanceof T)return Object.assign(n.getMergedTraits(),Ee(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new T(r)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Ee(this.memberTraits)}getOwnTraits(){return Ee(this.traits)}getKeySchema(){const[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const n=this.getSchema(),s=e?15:n[4]??0;return ke([s,0],"key")}getValueSchema(){const e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(i!=null)return ke([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){const n=r[4].indexOf(e),s=r[5][n];return ke(Bt(s)?s:[s,0],e)}if(this.isDocumentSchema())return ke([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],ke([e[5][r],0],e[4][r])]}}function ke(t,e){if(t instanceof T)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const r=T;return new r(t,e)}const Bt=t=>Array.isArray(t)&&t.length===2,ho=t=>Array.isArray(t)&&t.length>=5;class R{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return R.registries.has(e)||R.registries.set(e,new R(e)),R.registries.get(e)}register(e,r){const n=this.normalizeShapeId(e);R.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){const r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){const n=e,s=R.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){const r=e;return R.for(r[1]).exceptions.get(r)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}const Jt=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&xo.warn(Eo(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},po=Math.ceil(2**127*(2-2**-23)),Ir=t=>{const e=Jt(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>po)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},mo=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},Br=t=>zn(t,16),kr=t=>zn(t,8),zn=(t,e)=>{const r=mo(t);if(r!==void 0&&go(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},go=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},yo=t=>Jt(typeof t=="string"?yt(t):t),wo=t=>Ir(typeof t=="string"?yt(t):t),So=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,yt=t=>{const e=t.match(So);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},dt=t=>Br(typeof t=="string"?yt(t):t),bo=t=>kr(typeof t=="string"?yt(t):t),Eo=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),xo={warn:console.warn},Co=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function jn(t){const e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,d=a<10?`0${a}`:`${a}`;return`${Co[n]}, ${c} ${nr[r]} ${e} ${u}:${l}:${d} GMT`}const To=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ao=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=To.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,c,u,l]=e,d=dt(qe(n)),h=oe(s,"month",1,12),p=oe(i,"day",1,31),f=st(d,h,p,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&f.setTime(f.getTime()-Fo(l)),f},Ro=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),vo=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Do=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Oo=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=Ro.exec(t);if(e){const[r,n,s,i,o,a,c,u]=e;return st(dt(qe(i)),kt(s),oe(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=vo.exec(t),e){const[r,n,s,i,o,a,c,u]=e;return ko(st(Io(i),kt(s),oe(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=Do.exec(t),e){const[r,n,s,i,o,a,c,u]=e;return st(dt(qe(u)),kt(n),oe(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},Mo=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=yo(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},st=(t,e,r,n)=>{const s=e-1;return _o(t,s,r),new Date(Date.UTC(t,s,r,oe(n.hours,"hour",0,23),oe(n.minutes,"minute",0,59),oe(n.seconds,"seconds",0,60),No(n.fractionalMilliseconds)))},Io=t=>{const e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+dt(qe(t));return r<e?r+100:r},Bo=50*365*24*60*60*1e3,ko=t=>t.getTime()-new Date().getTime()>Bo?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,kt=t=>{const e=nr.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},Po=[31,28,31,30,31,30,31,31,30,31,30,31],_o=(t,e,r)=>{let n=Po[e];if(e===1&&$o(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${nr[e]} in ${t}: ${r}`)},$o=t=>t%4===0&&(t%100!==0||t%400===0),oe=(t,e,r,n)=>{const s=bo(qe(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},No=t=>t==null?0:wo("0."+t)*1e3,Fo=t=>{const e=t[0];let r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);const n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},qe=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},Pr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),O=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),sr=()=>{if(Pr)return Pr();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,O[t[0]]+O[t[1]]+O[t[2]]+O[t[3]]+"-"+O[t[4]]+O[t[5]]+"-"+O[t[6]]+O[t[7]]+"-"+O[t[8]]+O[t[9]]+"-"+O[t[10]]+O[t[11]]+O[t[12]]+O[t[13]]+O[t[14]]+O[t[15]]},Z=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Z.from=t=>t&&typeof t=="object"&&(t instanceof Z||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Z(String(t)):Z(JSON.stringify(t));Z.fromObject=Z.from;function Uo(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}const ir="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",or="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",ar="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",qn="(\\d?\\d)",Wn="(\\d{4})",Lo=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),Ho=new RegExp(`^${ir}, ${qn} ${or} ${Wn} ${ar} GMT$`),zo=new RegExp(`^${ir}, ${qn}-${or}-(\\d\\d) ${ar} GMT$`),jo=new RegExp(`^${ir} ${or} ( [1-9]|\\d\\d) ${ar} ${Wn}$`),qo=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Wo=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},Vo=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");const e=Lo.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,r,n,s,i,o,a,,c,u]=e;ee(n,1,12),ee(s,1,31),ee(i,0,23),ee(o,0,59),ee(a,0,60);const l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){const[,d,h,p]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],f=d==="-"?1:-1;l.setTime(l.getTime()+f*(Number(h)*60*60*1e3+Number(p)*60*1e3))}return l},Jo=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,i,o,a,c;if((c=Ho.exec(t))?[,e,r,n,s,i,o,a]=c:(c=zo.exec(t))?([,e,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=jo.exec(t))&&([,r,e,s,i,o,a,n]=c),n&&o){const u=Date.UTC(Number(n),qo.indexOf(r),Number(e),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);ee(e,1,31),ee(s,0,23),ee(i,0,59),ee(o,0,60);const l=new Date(u);return l.setUTCFullYear(Number(n)),l}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function ee(t,e,r){const n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}function Go(t,e,r){if(!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");const n=t.split(e),s=[];let i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=e+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}const Vn=t=>{const e=t.length,r=[];let n=!1,s,i=0;for(let o=0;o<e;++o){const a=t[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(i,o)),i=o+1);break}s=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();const a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})},_r=/^-?\d*(\.\d+)?$/;class j{string;type;constructor(e,r){if(this.string=e,this.type=r,!_r.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const r=e;return j.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&_r.test(r.string)}}class wt{serdeContext;setSerdeContext(e){this.serdeContext=e}}class Ko extends wt{options;constructor(e){super(),this.options=e}getRequestType(){return B}getResponseType(){return me}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(const[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){const s=T.of(r.input),i=Ee(r.traits??{});if(i.endpoint){let o=i.endpoint?.[0];if(typeof o=="string"){const a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(const[c]of a){const u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);o=o.replace(`{${c}}`,u)}e.hostname=o+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){const{EventStreamSerde:e}=await $n(async()=>{const{EventStreamSerde:r}=await import("./index-Dfahi4jC.js");return{EventStreamSerde:r}},__vite__mapDeps([0,1,2]));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,i){return[]}getEventStreamMarshaller(){const e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}class Xo extends Ko{async serializeRequest(e,r,n){const s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),u=T.of(e?.input),l=u.getSchema();let d=!1,h;const p=new B({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(p,c),this.setHostPrefix(p,e,s);const f=Ee(e.traits);if(f.http){p.method=f.http[0];const[y,g]=f.http[1].split("?");p.path=="/"?p.path=y:p.path+=y;const w=new URLSearchParams(g??"");Object.assign(o,Object.fromEntries(w))}}for(const[f,y]of u.structIterator()){const g=y.getMergedTraits()??{},w=s[f];if(!(w==null&&!y.isIdempotencyToken()))if(g.httpPayload)y.isStreaming()?y.isStructSchema()?s[f]&&(h=await this.serializeEventStream({eventStream:s[f],requestSchema:u})):h=w:(i.write(y,w),h=i.flush()),delete s[f];else if(g.httpLabel){i.write(y,w);const S=i.flush();p.path.includes(`{${f}+}`)?p.path=p.path.replace(`{${f}+}`,S.split("/").map(Mr).join("/")):p.path.includes(`{${f}}`)&&(p.path=p.path.replace(`{${f}}`,Mr(S))),delete s[f]}else if(g.httpHeader)i.write(y,w),a[g.httpHeader.toLowerCase()]=String(i.flush()),delete s[f];else if(typeof g.httpPrefixHeaders=="string"){for(const[S,E]of Object.entries(w)){const x=g.httpPrefixHeaders+S;i.write([y.getValueSchema(),{httpHeader:x}],E),a[x.toLowerCase()]=i.flush()}delete s[f]}else g.httpQuery||g.httpQueryParams?(this.serializeQuery(y,w,o),delete s[f]):d=!0}return d&&s&&(i.write(l,s),h=i.flush()),p.headers=a,p.query=o,p.body=h,p}serializeQuery(e,r,n){const s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(const[o,a]of Object.entries(r))if(!(o in n)){const c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){const o=!!e.getMergedTraits().sparse,a=[];for(const c of r){s.write([e.getValueSchema(),i],c);const u=s.flush();(o||u!==void 0)&&a.push(u)}n[i.httpQuery]=a}else s.write([e,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(e,r,n){const s=this.deserializer,i=T.of(e.output),o={};if(n.statusCode>=300){const c=await $e(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const c in n.headers){const u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}const a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){const c=await $e(n.body,r);if(c.byteLength>0){const u=await s.read(i,c);for(const l of a)o[l]=u[l]}}else a.discardResponseBody&&await $e(n.body,r);return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(e,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=!0;const c=this.deserializer,u=T.of(e),l=[];for(const[d,h]of u.structIterator()){const p=h.getMemberTraits();if(p.httpPayload){if(a=!1,h.isStreaming())h.isStructSchema()?o[d]=await this.deserializeEventStream({response:n,responseSchema:u}):o[d]=oo(n.body);else if(n.body){const y=await $e(n.body,r);y.byteLength>0&&(o[d]=await c.read(h,y))}}else if(p.httpHeader){const f=String(p.httpHeader).toLowerCase(),y=n.headers[f];if(y!=null)if(h.isListSchema()){const g=h.getValueSchema();g.getMergedTraits().httpHeader=f;let w;g.isTimestampSchema()&&g.getSchema()===4?w=Go(y,",",2):w=Vn(y);const S=[];for(const E of w)S.push(await c.read(g,E.trim()));o[d]=S}else o[d]=await c.read(h,y)}else if(p.httpPrefixHeaders!==void 0){o[d]={};for(const[f,y]of Object.entries(n.headers))if(f.startsWith(p.httpPrefixHeaders)){const g=h.getValueSchema();g.getMergedTraits().httpHeader=f,o[d][f.slice(p.httpPrefixHeaders.length)]=await c.read(g,y)}}else p.httpResponseCode?o[d]=n.statusCode:l.push(d)}return l.discardResponseBody=a,l}}function St(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??e.timestampFormat.default}class Qo extends wt{settings;constructor(e){super(),this.settings=e}read(e,r){const n=T.of(e);if(n.isListSchema())return Vn(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Te)(r);if(n.isTimestampSchema())switch(St(n,this.settings)){case 5:return Vo(r);case 6:return Jo(r);case 7:return Wo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){const s=n.getMergedTraits().mediaType;let i=r;if(s)return n.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(s==="application/json"||s.endsWith("+json"))&&(i=Z.from(i)),i}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new j(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??De)((this.serdeContext?.base64Decoder??Te)(e))}}class Zo extends wt{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new Qo(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){const n=T.of(e),s=n.getMergedTraits(),i=this.serdeContext?.utf8Encoder??De;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,i(r));if(s.httpPayload){if(n.isBlobSchema()){const o=this.serdeContext?.utf8Decoder??ge;return typeof r=="string"?o(r):r}else if(n.isStringSchema())return"byteLength"in r?i(r):r}return this.codecDeserializer.read(n,r)}}class Yo extends wt{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){const n=T.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(St(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=jn(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??ye)(r);return}if(n.isListSchema()&&Array.isArray(r)){let o="";for(const a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);const c=this.flush(),u=n.getValueSchema().isTimestampSchema()?c:Uo(c);o!==""&&(o+=", "),o+=u}this.stringBuffer=o;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":const s=n.getMergedTraits().mediaType;let i=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(i=Z.from(i)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??ye)(i.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=sr():this.stringBuffer=String(r)}}flush(){const e=this.stringBuffer;return this.stringBuffer="",e}}class ea{codecSerializer;stringSerializer;buffer;constructor(e,r,n=new Yo(r)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){const n=T.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){const e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}function ta(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class ra{authSchemes=new Map;constructor(e){for(const[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}class na{async sign(e,r,n){const s=B.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}const sa=t=>function(r){return cr(r)&&r.expiration.getTime()-Date.now()<t},ia=3e5,Jn=sa(ia),cr=t=>t.expiration!==void 0,Gn=(t,e,r)=>{if(t===void 0)return;const n=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,a=!1;const c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))},oa=void 0;function aa(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function ca(t){const e=Ne(t.userAgentAppId??oa),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{const n=await e();if(!aa(n)){const s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}class ua{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="";const{parameters:n}=this;if(n.length===0)return!1;for(const s of n){const i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const la=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Kn=t=>la.test(t)||t.startsWith("[")&&t.endsWith("]"),da=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),bt=(t,e=!1)=>{if(!e)return da.test(t);const r=t.split(".");for(const n of r)if(!bt(n))return!1;return!0},ft={},We="endpoints";function ae(t){return typeof t!="object"||t==null?t:"ref"in t?`$${ae(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(ae).join(", ")})`:JSON.stringify(t,null,2)}class $ extends Error{constructor(e){super(e),this.name="EndpointError"}}const fa=(t,e)=>t===e,ha=t=>{const e=t.split("."),r=[];for(const n of e){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new $(`Path: '${t}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new $(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},Xn=(t,e)=>ha(e).reduce((r,n)=>{if(typeof r!="object")throw new $(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),pa=t=>t!=null,ma=t=>!t,Pt={[He.HTTP]:80,[He.HTTPS]:443},ga=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:h,port:p,protocol:f="",path:y="",query:g={}}=t,w=new URL(`${f}//${h}${p?`:${p}`:""}${y}`);return w.search=Object.entries(g).map(([S,E])=>`${S}=${E}`).join("&"),w}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;const c=o.slice(0,-1);if(!Object.values(He).includes(c))return null;const u=Kn(s),l=r.includes(`${n}:${Pt[c]}`)||typeof t=="string"&&t.includes(`${n}:${Pt[c]}`),d=`${n}${l?`:${Pt[c]}`:""}`;return{scheme:c,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},ya=(t,e)=>t===e,wa=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),Sa=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ba={booleanEquals:fa,getAttr:Xn,isSet:pa,isValidHostLabel:bt,not:ma,parseURL:ga,stringEquals:ya,substring:wa,uriEncode:Sa},Qn=(t,e)=>{const r=[],n={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),s=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[c,u]=a.split("#");r.push(Xn(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},Ea=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Et=(t,e,r)=>{if(typeof t=="string")return Qn(t,r);if(t.fn)return Yn.callFunction(t,r);if(t.ref)return Ea(t,r);throw new $(`'${e}': ${String(t)} is not a string, function or reference.`)},Zn=({fn:t,argv:e},r)=>{const n=e.map(i=>["boolean","number"].includes(typeof i)?i:Yn.evaluateExpression(i,"arg",r)),s=t.split(".");return s[0]in ft&&s[1]!=null?ft[s[0]][s[1]](...n):ba[t](...n)},Yn={evaluateExpression:Et,callFunction:Zn},xa=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new $(`'${t}' is already defined in Reference Record.`);const n=Zn(e,r);return r.logger?.debug?.(`${We} evaluateCondition: ${ae(e)} = ${ae(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},ur=(t=[],e)=>{const r={};for(const n of t){const{result:s,toAssign:i}=xa(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,e.logger?.debug?.(`${We} assign: ${i.name} := ${ae(i.value)}`))}return{result:!0,referenceRecord:r}},Ca=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=Et(i,"Header value entry",e);if(typeof o!="string")throw new $(`Header '${n}' value '${o}' is not a string`);return o})}),{}),es=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:rs.getEndpointProperty(s,e)}),{}),ts=(t,e)=>{if(Array.isArray(t))return t.map(r=>ts(r,e));switch(typeof t){case"string":return Qn(t,e);case"object":if(t===null)throw new $(`Unexpected endpoint property: ${t}`);return rs.getEndpointProperties(t,e);case"boolean":return t;default:throw new $(`Unexpected endpoint property type: ${typeof t}`)}},rs={getEndpointProperty:ts,getEndpointProperties:es},Ta=(t,e)=>{const r=Et(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new $(`Endpoint URL must be a string, got ${typeof r}`)},Aa=(t,e)=>{const{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=ur(r,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${We} Resolving endpoint from template: ${ae(n)}`),{...u!=null&&{headers:Ca(u,o)},...c!=null&&{properties:es(c,o)},url:Ta(a,o)}},Ra=(t,e)=>{const{conditions:r,error:n}=t,{result:s,referenceRecord:i}=ur(r,e);if(s)throw new $(Et(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},ns=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const n=Aa(r,e);if(n)return n}else if(r.type==="error")Ra(r,e);else if(r.type==="tree"){const n=ss.evaluateTreeRule(r,e);if(n)return n}else throw new $(`Unknown endpoint rule: ${r}`);throw new $("Rules evaluation failed")},va=(t,e)=>{const{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=ur(r,e);if(s)return ss.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},ss={evaluateRules:ns,evaluateTreeRule:va},Da=(t,e)=>{const{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${We} Initial EndpointParams: ${ae(r)}`);const o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(o.length>0)for(const[u,l]of o)r[u]=r[u]??l;const a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(const u of a)if(r[u]==null)throw new $(`Missing required parameter: '${u}'`);const c=ns(i,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${We} Resolved endpoint: ${ae(c)}`),c},is=(t,e=!1)=>{if(e){for(const r of t.split("."))if(!is(r))return!1;return!0}return!(!bt(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Kn(t))},$r=":",Oa="/",Ma=t=>{const e=t.split($r);if(e.length<6)return null;const[r,n,s,i,o,...a]=e;if(r!=="arn"||n===""||s===""||a.join($r)==="")return null;const c=a.map(u=>u.split(Oa)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},Ia=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Ba={partitions:Ia};let ka=Ba;const Pa=t=>{const{partitions:e}=ka;for(const n of e){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(const n of e){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(t))return{...i}}const r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},os={isVirtualHostableS3Bucket:is,parseArn:Ma,partition:Pa};ft.aws=os;function _a(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}const ht=t=>{if(typeof t=="string")return ht(new URL(t));const{hostname:e,pathname:r,port:n,protocol:s,search:i}=t;let o;return i&&(o=_a(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};function $a(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}function V(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}const Nr=t=>me.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,as=t=>new Date(Date.now()+t),Na=(t,e)=>Math.abs(as(e).getTime()-t)>=3e5,Fr=(t,e)=>{const r=Date.parse(t);return Na(r,e)?r-Date.now():e},Ue=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Fa=async t=>{const e=Ue("context",t.context),r=Ue("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await Ue("signer",r.signer)(n),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}};class Ua{async sign(e,r,n){if(!B.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await Fa(n),{config:i,signer:o}=s;let{signingRegion:a,signingName:c}=s;const u=n.context;if(u?.authSchemes?.length??!1){const[d,h]=u.authSchemes;d?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await o.sign(e,{signingDate:as(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{const n=r.ServerTime??Nr(r.$response);if(n){const s=Ue("config",e.config),i=s.systemClockOffset;s.systemClockOffset=Fr(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){const n=Nr(e);if(n){const s=Ue("config",r.config);s.systemClockOffset=Fr(n,s.systemClockOffset)}}}const La=(t,e,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=t());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return async c=>((!i||c?.forceRefresh)&&(n=await a()),n)},Ha="X-Amz-Algorithm",za="X-Amz-Credential",cs="X-Amz-Date",ja="X-Amz-SignedHeaders",qa="X-Amz-Expires",us="X-Amz-Signature",ls="X-Amz-Security-Token",ds="authorization",fs=cs.toLowerCase(),Wa="date",Va=[ds,fs,Wa],Ja=us.toLowerCase(),Gt="x-amz-content-sha256",Ga=ls.toLowerCase(),Ka={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Xa=/^proxy-/,Qa=/^sec-/,_t="AWS4-HMAC-SHA256",Za="AWS4-HMAC-SHA256-PAYLOAD",Ya="UNSIGNED-PAYLOAD",ec=50,hs="aws4_request",tc=3600*24*7,tt={},$t=[],Nt=(t,e,r)=>`${t}/${e}/${r}/${hs}`,rc=async(t,e,r,n,s)=>{const i=await Ur(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${n}:${s}:${k(i)}:${e.sessionToken}`;if(o in tt)return tt[o];for($t.push(o);$t.length>ec;)delete tt[$t.shift()];let a=`AWS4${e.secretAccessKey}`;for(const c of[r,n,s,hs])a=await Ur(t,a,c);return tt[o]=a},Ur=(t,e,r)=>{const n=new t(e);return n.update(ze(r)),n.digest()},Lr=({headers:t},e,r)=>{const n={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in Ka||e?.has(i)||Xa.test(i)||Qa.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},nc=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",Ft=async({headers:t,body:e},r)=>{for(const n of Object.keys(t))if(n.toLowerCase()===Gt)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||nc(e)){const n=new r;return n.update(ze(e)),k(await n.digest())}return Ya};class sc{format(e){const r=[];for(const i of Object.keys(e)){const o=ge(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=ge(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(oc.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!ic.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(rr(e.value.replace(/\-/g,"")),1),d}}}var Hr;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Hr||(Hr={}));const ic=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let oc=class ps{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&zr(r),new ps(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&zr(e),parseInt(k(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function zr(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const ac=(t,e)=>{t=t.toLowerCase();for(const r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},cc=(t,e={})=>{const{headers:r,query:n={}}=B.clone(t);for(const s of Object.keys(r)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},jr=t=>{t=B.clone(t);for(const e of Object.keys(t.headers))Va.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},uc=({query:t={}})=>{const e=[],r={};for(const n of Object.keys(t)){if(n.toLowerCase()===Ja)continue;const s=he(n);e.push(s);const i=t[n];typeof i=="string"?r[s]=`${s}=${he(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${he(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},lc=t=>dc(t).toISOString().replace(/\.\d{3}Z$/,"Z"),dc=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class fc{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=te(n),this.credentialProvider=te(r)}createCanonicalRequest(e,r,n){const s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${uc(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){const i=new this.sha256;i.update(ze(n));const o=await i.digest();return`${s}
${e}
${r}
${k(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const r=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return he(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const r=lc(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class qr extends fc{headerFormatter=new sc;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o})}async presign(e,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:l}=r,d=await this.credentialProvider();this.validateResolvedCredentials(d);const h=u??await this.regionProvider(),{longDate:p,shortDate:f}=this.formatDate(n);if(s>tc)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const y=Nt(f,h,l??this.service),g=cc(jr(e),{unhoistableHeaders:o,hoistableHeaders:c});d.sessionToken&&(g.query[ls]=d.sessionToken),g.query[Ha]=_t,g.query[za]=`${d.accessKeyId}/${y}`,g.query[cs]=p,g.query[qa]=s.toString(10);const w=Lr(g,i,a);return g.query[ja]=this.getCanonicalHeaderList(w),g.query[us]=await this.getSignature(p,y,this.getSigningKey(d,h,f,l),this.createCanonicalRequest(g,w,await Ft(e,this.sha256))),g}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),l=Nt(c,a,o??this.service),d=await Ft({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);const p=k(await h.digest()),f=[Za,u,l,s,p,d].join(`
`);return this.signString(f,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,o,a,s));return c.update(ze(e)),k(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=i??await this.regionProvider(),u=jr(e),{longDate:l,shortDate:d}=this.formatDate(r),h=Nt(d,c,o??this.service);u.headers[fs]=l,a.sessionToken&&(u.headers[Ga]=a.sessionToken);const p=await Ft(u,this.sha256);!ac(Gt,u.headers)&&this.applyChecksum&&(u.headers[Gt]=p);const f=Lr(u,s,n),y=await this.getSignature(l,h,this.getSigningKey(a,c,d,o),this.createCanonicalRequest(u,f,p));return u.headers[ds]=`${_t} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(f)}, Signature=${y}`,u}async getSignature(e,r,n,s){const i=await this.createStringToSign(e,r,s,_t),o=new this.sha256(await n);return o.update(ze(i)),k(await o.digest())}getSigningKey(e,r,n,s){return rc(this.sha256,e,n,r,s||this.service)}}const hc=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;const l=pc(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),d=mc(t,l);r&&!d.attributed?(n=async h=>d(h).then(p=>$a(p,"CREDENTIALS_CODE","e")),n.memoized=d.memoized,n.configBound=d.configBound,n.attributed=!0):n=d},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=Ne(t.signer):t.regionInfoProvider?a=()=>Ne(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,l])=>{const{signingRegion:d,signingService:h}=u;t.signingRegion=t.signingRegion||d||l,t.signingName=t.signingName||h||t.serviceId;const p={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},f=t.signerConstructor||qr;return new f(p)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Ne(t.region)(),properties:{}},u);const l=u.signingRegion,d=u.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||d||t.serviceId;const h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},p=t.signerConstructor||qr;return new p(h)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})};function pc(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=Gn(e,Jn,cr):r?n=Ne(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function mc(t,e){if(e.configBound)return e;const r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}const Wr=typeof TextEncoder=="function"?new TextEncoder:null,gc=t=>{if(typeof t=="string"){if(Wr)return Wr.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const n=t.charCodeAt(r);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},ue=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const n of e)r.push(n);return r},se=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,pt=()=>{let t=[],e=[],r=!1;const n=new Set,s=d=>d.sort((h,p)=>Vr[p.step]-Vr[h.step]||Jr[p.priority||"normal"]-Jr[h.priority||"normal"]),i=d=>{let h=!1;const p=f=>{const y=ue(f.name,f.aliases);if(y.includes(d)){h=!0;for(const g of y)n.delete(g);return!1}return!0};return t=t.filter(p),e=e.filter(p),h},o=d=>{let h=!1;const p=f=>{if(f.middleware===d){h=!0;for(const y of ue(f.name,f.aliases))n.delete(y);return!1}return!0};return t=t.filter(p),e=e.filter(p),h},a=d=>(t.forEach(h=>{d.add(h.middleware,{...h})}),e.forEach(h=>{d.addRelativeTo(h.middleware,{...h})}),d.identifyOnResolve?.(l.identifyOnResolve()),d),c=d=>{const h=[];return d.before.forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...c(p))}),h.push(d),d.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...c(p))}),h},u=(d=!1)=>{const h=[],p=[],f={};return t.forEach(g=>{const w={...g,before:[],after:[]};for(const S of ue(w.name,w.aliases))f[S]=w;h.push(w)}),e.forEach(g=>{const w={...g,before:[],after:[]};for(const S of ue(w.name,w.aliases))f[S]=w;p.push(w)}),p.forEach(g=>{if(g.toMiddleware){const w=f[g.toMiddleware];if(w===void 0){if(d)return;throw new Error(`${g.toMiddleware} is not found when adding ${se(g.name,g.aliases)} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&w.after.push(g),g.relation==="before"&&w.before.push(g)}}),s(h).map(c).reduce((g,w)=>(g.push(...w),g),[])},l={add:(d,h={})=>{const{name:p,override:f,aliases:y}=h,g={step:"initialize",priority:"normal",middleware:d,...h},w=ue(p,y);if(w.length>0){if(w.some(S=>n.has(S))){if(!f)throw new Error(`Duplicate middleware name '${se(p,y)}'`);for(const S of w){const E=t.findIndex(A=>A.name===S||A.aliases?.some(D=>D===S));if(E===-1)continue;const x=t[E];if(x.step!==g.step||g.priority!==x.priority)throw new Error(`"${se(x.name,x.aliases)}" middleware with ${x.priority} priority in ${x.step} step cannot be overridden by "${se(p,y)}" middleware with ${g.priority} priority in ${g.step} step.`);t.splice(E,1)}}for(const S of w)n.add(S)}t.push(g)},addRelativeTo:(d,h)=>{const{name:p,override:f,aliases:y}=h,g={middleware:d,...h},w=ue(p,y);if(w.length>0){if(w.some(S=>n.has(S))){if(!f)throw new Error(`Duplicate middleware name '${se(p,y)}'`);for(const S of w){const E=e.findIndex(A=>A.name===S||A.aliases?.some(D=>D===S));if(E===-1)continue;const x=e[E];if(x.toMiddleware!==g.toMiddleware||x.relation!==g.relation)throw new Error(`"${se(x.name,x.aliases)}" middleware ${x.relation} "${x.toMiddleware}" middleware cannot be overridden by "${se(p,y)}" middleware ${g.relation} "${g.toMiddleware}" middleware.`);e.splice(E,1)}}for(const S of w)n.add(S)}e.push(g)},clone:()=>a(pt()),use:d=>{d.applyToStack(l)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let h=!1;const p=f=>{const{tags:y,name:g,aliases:w}=f;if(y&&y.includes(d)){const S=ue(g,w);for(const E of S)n.delete(E);return h=!0,!1}return!0};return t=t.filter(p),e=e.filter(p),h},concat:d=>{const h=a(pt());return h.use(d),h.identifyOnResolve(r||h.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>u(!0).map(d=>{const h=d.step??d.relation+" "+d.toMiddleware;return se(d.name,d.aliases)+" - "+h}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,h)=>{for(const p of u().map(f=>f.middleware).reverse())d=p(d,h);return r&&console.log(l.identify()),d}};return l},Vr={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Jr={high:3,normal:2,low:1};class yc{config;middlewareStack=pt();initConfig;handlers;constructor(e){this.config=e}send(e,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const Ut="***SensitiveInformation***";function Kt(t,e){if(e==null)return e;const r=T.of(t);if(r.getMergedTraits().sensitive)return Ut;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Ut}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Ut}else if(r.isStructSchema()&&typeof e=="object"){const n=e,s={};for(const[i,o]of r.structIterator())n[i]!=null&&(s[i]=Kt(o,n[i]));return s}return e}class ms{middlewareStack=pt();schema;static classBuilder(){return new wc}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:d}){for(const g of s.bind(this)(d,e,r,n))this.middlewareStack.use(g);const h=e.concat(this.middlewareStack),{logger:p}=r,f={logger:p,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Wt]:{commandInstance:this,...u},...l},{requestHandler:y}=r;return h.resolve(g=>y.handle(g.request,n||{}),f)}}class wc{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends ms{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,i){const o=e._operationSchema,a=o?.[4]??o?.input,c=o?.[5]??o?.output;return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(o?Kt.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(o?Kt.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class xe extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return xe.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===xe?xe.isInstance(e):xe.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Gr=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},Sc=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},bc=t=>{const e=[];for(const r in lt){const n=lt[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},Ec=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},xc=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),Cc=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Tc=t=>Object.assign(bc(t),xc(t)),Ac=t=>Object.assign(Ec(t),Cc(t));class gs{trace(){}debug(){}info(){}warn(){}error(){}}class Rc{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){const n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){const i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{const{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:d}=o.getMergedTraits();return!a&&!c&&!u&&!l&&d===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,i,o){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));const u={$metadata:i,$fault:n.statusCode<500?"client":"server"},l=R.for(a);try{return{errorSchema:o?.(l,c)??l.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";const h=R.for("smithy.ts.sdk.synthetic."+a),p=h.getBaseException();if(p){const f=h.getErrorCtor(p)??Error;throw this.decorateServiceException(Object.assign(new f({name:c}),u),s)}throw this.decorateServiceException(Object.assign(new Error(c),u),s)}}decorateServiceException(e,r={}){if(this.queryCompat){const n=e.Message??r.Message,s=Gr(e,r);n&&(s.message=n),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??n};const i=s.$metadata.requestId;return i&&(s.RequestId=i),s}return Gr(e,r)}setQueryCompatError(e,r){const n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){const[s,i]=n.split(";"),o=Object.entries(e),a={Code:s,Type:i};Object.assign(e,a);for(const[c,u]of o)a[c==="message"?"Message":c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(s=>T.of(s).getMergedTraits().awsQueryError?.[0]===r)}}}class lr{serdeContext;setSerdeContext(e){this.serdeContext=e}}function*vc(t,e){if(t.isUnitSchema())return;const r=t.getSchema();for(let n=0;n<r[4].length;++n){const s=r[4][n],i=r[5][n],o=new T([i,0],s);!(s in e)&&!o.isIdempotencyToken()||(yield[s,o])}}function*Dc(t,e,r){if(t.isUnitSchema())return;const n=t.getSchema();let s=Object.keys(e).filter(i=>i!=="__type").length;for(let i=0;i<n[4].length&&s!==0;++i){const o=n[4][i],a=n[5][i],c=new T([a,0],o);let u=o;r&&(u=c.getMergedTraits()[r]??o),u in e&&(yield[o,c],s-=1)}}function Oc(t,e,r){if(r?.source){const n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new j(n,"bigDecimal"):BigInt(n)}return e}const Mc=(t,e)=>$e(t,e).then(r=>(e?.utf8Encoder??De)(r)),Ic=(t,e)=>Mc(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),Bc=(t,e)=>{const r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){const i=r(e,"code");if(i&&e[i]!==void 0)return n(e[i]);if(e.__type!==void 0)return n(e.__type)}};class kc extends lr{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,Oc):await Ic(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){const n=r!==null&&typeof r=="object",s=T.of(e);if(n){if(s.isStructSchema()){const o={};for(const[a,c]of Dc(s,r,this.settings.jsonName?"jsonName":!1)){const u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._read(c,r[u]);l!=null&&(o[a]=l)}return o}if(Array.isArray(r)&&s.isListSchema()){const o=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(const u of r)(c||u!=null)&&a.push(this._read(o,u));return a}if(s.isMapSchema()){const o=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(const[u,l]of Object.entries(r))(c||l!=null)&&(a[u]=this._read(o,l));return a}}if(s.isBlobSchema()&&typeof r=="string")return Te(r);const i=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&i)return i==="application/json"||i.endsWith("+json")?Z.from(r):r;if(s.isTimestampSchema()&&r!=null)switch(St(s,this.settings)){case 5:return Ao(r);case 6:return Oo(r);case 7:return Mo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof j)return r;const o=r;return o.type==="bigDecimal"&&"string"in o?new j(o.string,o.type):new j(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(s.isDocumentSchema())if(n){const o=Array.isArray(r)?[]:{};for(const[a,c]of Object.entries(r))c instanceof j?o[a]=c:o[a]=this._read(s,c);return o}else return structuredClone(r);return r}}const Kr="";class Pc{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof j){const n=`${Kr+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){const n=r.toString(),s=`${Kr+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(const[r,n]of this.values)e=e.replace(r,n);return e}}class _c extends lr{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=T.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=T.of(e).getName(!0))}flush(){const{rootSchema:e,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);const n=new Pc;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(e,r,n){const s=r!==null&&typeof r=="object",i=T.of(e);if(s){if(i.isStructSchema()){const o={};for(const[a,c]of vc(i,r)){const u=this._write(c,r[a],i);if(u!==void 0){const l=c.getMergedTraits().jsonName,d=this.settings.jsonName?l??a:a;o[d]=u}}return o}if(Array.isArray(r)&&i.isListSchema()){const o=i.getValueSchema(),a=[],c=!!i.getMergedTraits().sparse;for(const u of r)(c||u!=null)&&a.push(this._write(o,u));return a}if(i.isMapSchema()){const o=i.getValueSchema(),a={},c=!!i.getMergedTraits().sparse;for(const[u,l]of Object.entries(r))(c||l!=null)&&(a[u]=this._write(o,l));return a}if(r instanceof Uint8Array&&(i.isBlobSchema()||i.isDocumentSchema()))return i===this.rootSchema?r:(this.serdeContext?.base64Encoder??ye)(r);if(r instanceof Date&&(i.isTimestampSchema()||i.isDocumentSchema()))switch(St(i,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return jn(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}r instanceof j&&(this.useReplacer=!0)}if(!(r===null&&n?.isStructSchema())){if(i.isStringSchema()){if(typeof r>"u"&&i.isIdempotencyToken())return sr();const o=i.getMergedTraits().mediaType;return r!=null&&o&&(o==="application/json"||o.endsWith("+json"))?Z.from(r):r}if(typeof r=="number"&&i.isNumericSchema())return Math.abs(r)===1/0||isNaN(r)?String(r):r;if(typeof r=="string"&&i.isBlobSchema())return i===this.rootSchema?r:(this.serdeContext?.base64Encoder??ye)(r);if(typeof r=="bigint"&&(this.useReplacer=!0),i.isDocumentSchema())if(s){const o=Array.isArray(r)?[]:{};for(const[a,c]of Object.entries(r))c instanceof j?(this.useReplacer=!0,o[a]=c):o[a]=this._write(i,c);return o}else return structuredClone(r);return r}}}class $c extends lr{settings;constructor(e){super(),this.settings=e}createSerializer(){const e=new _c(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){const e=new kc(this.settings);return e.setSerdeContext(this.serdeContext),e}}class Nc extends Xo{serializer;deserializer;codec;mixin=new Rc;constructor({defaultNamespace:e}){super({defaultNamespace:e});const r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new $c(r),this.serializer=new ea(this.codec.createSerializer(),r),this.deserializer=new Zo(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,n){const s=await super.serializeRequest(e,r,n),i=T.of(e.input);if(!s.headers["content-type"]){const o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(s.headers["content-type"]=o)}return s.body==null&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(e,r,n){const s=await super.deserializeResponse(e,r,n),i=T.of(e.output);for(const[o,a]of i.structIterator())a.getMemberTraits().httpPayload&&!(o in s)&&(s[o]=null);return s}async handleError(e,r,n,s,i){const o=Bc(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),u=T.of(a),l=s.message??s.Message??"Unknown",d=R.for(a[1]).getErrorCtor(a)??Error,h=new d(l);await this.deserializeHttpMessage(a,r,n,s);const p={};for(const[f,y]of u.structIterator()){const g=y.getMergedTraits().jsonName??f;p[f]=this.codec.createDeserializer().readObject(y,s[g])}throw this.mixin.decorateServiceException(Object.assign(h,c,{$fault:u.getMergedTraits().error,message:l},p),s)}getDefaultContentType(){return"application/json"}}const Fc=/\d{12}\.ddb/;async function Uc(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&V(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?V(t,"RETRY_MODE_ADAPTIVE","F"):V(t,"RETRY_MODE_STANDARD","E"):V(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(Fc)&&V(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":V(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":V(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":V(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const i=s;i.accountId&&V(t,"RESOLVED_ACCOUNT_ID","T");for(const[o,a]of Object.entries(i.$source??{}))V(t,o,a)}}const Xr="user-agent",Lt="x-amz-user-agent",Qr=" ",Ht="/",Lc=/[^!$%&'*+\-.^_`|~\w]/g,Hc=/[^!$%&'*+\-.^_`|~\w#]/g,Zr="-",zc=1024;function jc(t){let e="";for(const r in t){const n=t[r];if(e.length+n.length+1<=zc){e.length?e+=","+n:e+=n;continue}break}return e}const qc=t=>(e,r)=>async n=>{const{request:s}=n;if(!B.isInstance(s))return e(n);const{headers:i}=s,o=r?.userAgent?.map(rt)||[],a=(await t.defaultUserAgentProvider()).map(rt);await Uc(r,t,n);const c=r;a.push(`m/${jc(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const u=t?.customUserAgent?.map(rt)||[],l=await t.userAgentAppId();l&&a.push(rt(["app",`${l}`]));const d=[].concat([...a,...o,...u]).join(Qr),h=[...a.filter(p=>p.startsWith("aws-sdk-")),...u].join(Qr);return t.runtime!=="browser"?(h&&(i[Lt]=i[Lt]?`${i[Xr]} ${h}`:h),i[Xr]=d):i[Lt]=d,e({...n,request:s})},rt=t=>{const e=t[0].split(Ht).map(o=>o.replace(Lc,Zr)).join(Ht),r=t[1]?.replace(Hc,Zr),n=e.indexOf(Ht),s=e.substring(0,n);let i=e.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},Wc={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Vc=t=>({applyToStack:e=>{e.add(qc(t),Wc)}});function Jc(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Gc(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Kc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}const Xc=t=>new TextEncoder().encode(t);var Qc=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Xc;function Ve(t){return t instanceof Uint8Array?t:typeof t=="string"?Qc(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function Xt(t){return typeof t=="string"?t.length===0:t.byteLength===0}function Zc(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}var ys=(function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=Kc(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^eu[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t})(),Yc=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],eu=Zc(Yc);class Le{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Yr(r),new Le(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&Yr(e),parseInt(k(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Yr(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class tu{toUtf8;fromUtf8;constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){const r=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(Le.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!lu.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(rr(e.value.replace(/\-/g,"")),1),d}}parse(e){const r={};let n=0;for(;n<e.byteLength;){const s=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[i]={type:tn,value:!0};break;case 1:r[i]={type:tn,value:!1};break;case 2:r[i]={type:ru,value:e.getInt8(n++)};break;case 3:r[i]={type:nu,value:e.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:su,value:e.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:iu,value:new Le(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:const o=e.getUint16(n,!1);n+=2,r[i]={type:ou,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:const a=e.getUint16(n,!1);n+=2,r[i]={type:au,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:cu,value:new Date(new Le(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const c=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[i]={type:uu,value:`${k(c.subarray(0,4))}-${k(c.subarray(4,6))}-${k(c.subarray(6,8))}-${k(c.subarray(8,10))}-${k(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var en;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(en||(en={}));const tn="boolean",ru="byte",nu="short",su="integer",iu="long",ou="binary",au="string",cu="timestamp",uu="uuid",lu=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ws=4,ie=ws*2,le=4,du=ie+le*2;function fu({byteLength:t,byteOffset:e,buffer:r}){if(t<du)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(ws,!1),o=n.getUint32(ie,!1),a=n.getUint32(t-le,!1),c=new ys().update(new Uint8Array(r,e,ie));if(o!==c.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,e+ie,t-(ie+le))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,e+ie+le,i),body:new Uint8Array(r,e+ie+le+i,s-i-(ie+le+le))}}class Ss{headerMarshaller;messageBuffer;isEndOfStream;constructor(e,r){this.headerMarshaller=new tu(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){const n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new ys;return o.setUint32(0,s,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:r,body:n}=fu(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}}class hu{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class pu{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class mu{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const r=await this.options.deserializer(e);r!==void 0&&(yield r)}}}class gu{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}const yu=(t,e,r,n)=>{let s=t;const i={start(){},async transform(o,a){try{const c=new Date(Date.now()+await n()),u={":date":{type:"timestamp",value:c}},l=await e.sign({message:{body:o,headers:u},priorSignature:s},{signingDate:c});s=l.signature;const d=r.encode({headers:{...u,":chunk-signature":{type:"binary",value:rr(l.signature)}},body:o});a.enqueue(d)}catch(c){a.error(c)}}};return new TransformStream({...i})};class wu{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new Ss(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,r,n={}){const s=r.request,{body:i,headers:o,query:a}=s;if(!(i instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");const c=new TransformStream;s.body=c.readable;let u;try{u=await e(r)}catch(f){throw s.body.cancel(),f}const d=((o.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||a&&a["X-Amz-Signature"]||"",h=yu(d,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return i.pipeThrough(h).pipeThrough(c),u}}const Su=t=>new wu(t),bs=t=>t.protocol==="ws:"||t.protocol==="wss:";class bu{signer;constructor(e){this.signer=e.signer}presign(e,r={}){return this.signer.presign(e,r)}async sign(e,r){return B.isInstance(e)&&bs(e)?{...await this.signer.presign({...e,body:""},{...r,expiresIn:60,unsignableHeaders:new Set(Object.keys(e.headers).filter(s=>s!=="host"))}),body:e.body}:this.signer.sign(e,r)}}const Eu=t=>{const{signer:e}=t;return Object.assign(t,{signer:async r=>{const n=await e(r);if(xu(n))return new bu({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})},xu=t=>!!t;function Cu(t){const{port:e,query:r}=t;let{protocol:n,path:s,hostname:i}=t;n&&n.slice(-1)!==":"&&(n+=":"),e&&(i+=`:${e}`),s&&s.charAt(0)!=="/"&&(s=`/${s}`);let o=r?Fn(r):"";o&&o[0]!=="?"&&(o=`?${o}`);let a="";if(t.username!=null||t.password!=null){const u=t.username??"",l=t.password??"";a=`${u}:${l}@`}let c="";return t.fragment&&(c=`#${t.fragment}`),`${n}//${a}${i}${s}${o}${c}`}function Tu(t){let e=0,r=0,n=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){const a=t[Symbol.asyncIterator]();for(;;){const{value:c,done:u}=await a.next();if(u){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}const l=c.length;let d=0;for(;d<l;){if(!n){const p=l-d;s||(s=new Uint8Array(4));const f=Math.min(4-r,p);if(s.set(c.slice(d,d+f),r),r+=f,d+=f,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const h=Math.min(e-r,l-d);n.set(c.slice(d,d+h),r),r+=h,d+=h,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function Au(t,e){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},o=await t(i);if(o.$unknown){const a=new Error(e(r.body));throw a.name=s,a}throw o[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let Ru=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new Ss(e,r),this.utfEncoder=e}deserialize(e,r){const n=Tu(e);return new mu({messageStream:new hu({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Au(r,this.utfEncoder)})}serialize(e,r){return new pu({messageStream:new gu({inputStream:e,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const Es=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}}),xs=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await e.next();if(n)return r.close();r.enqueue(s)}})};class vu{universalMarshaller;constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new Ru({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){const n=Du(e)?Es(e):e;return this.universalMarshaller.deserialize(n,r)}serialize(e,r){const n=this.universalMarshaller.serialize(e,r);return typeof ReadableStream=="function"?xs(n):n}}const Du=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,Ou=t=>new vu(t),Mu=2e3;class dr{metadata={handlerProtocol:"websocket/h1.1"};config;configPromise;httpHandler;sockets={};static create(e,r=new je){return typeof e?.handle=="function"?e:new dr(e,r)}constructor(e,r=new je){this.httpHandler=r,typeof e=="function"?(this.config={},this.configPromise=e().then(n=>this.config=n??{})):(this.config=e??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(const[e,r]of Object.entries(this.sockets)){for(const n of r)n.close(1e3,"Socket closed through destroy() call");delete this.sockets[e]}}async handle(e){if(!bs(e))return this.httpHandler.handle(e);const r=Cu(e),n=new WebSocket(r);this.sockets[r]||(this.sockets[r]=[]),this.sockets[r].push(n),n.binaryType="arraybuffer",this.config=await this.configPromise;const{connectionTimeout:s=Mu}=this.config;await this.waitForReady(n,s);const{body:i}=e,o=Iu(i),a=this.connect(n,o),c=Bu(a);return{response:new me({statusCode:200,body:c})}}updateHttpClientConfig(e,r){this.configPromise=this.configPromise.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(e){this.sockets[e]=(this.sockets[e]??[]).filter(r=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState))}waitForReady(e,r){return new Promise((n,s)=>{const i=setTimeout(()=>{this.removeNotUsableSockets(e.url),s({$metadata:{httpStatusCode:500}})},r);e.onopen=()=>{clearTimeout(i),n()}})}connect(e,r){let n,s=!1,i=()=>{},o=()=>{};e.onmessage=u=>{o({done:!1,value:new Uint8Array(u.data)})},e.onerror=u=>{s=!0,e.close(),i(u)},e.onclose=()=>{this.removeNotUsableSockets(e.url),!s&&(n?i(n):o({done:!0,value:void 0}))};const a={[Symbol.asyncIterator]:()=>({next:()=>new Promise((u,l)=>{o=u,i=l})})};return(async()=>{try{for await(const u of r)e.send(u)}catch(u){n=u}finally{e.close(1e3)}})(),a}}const Iu=t=>t[Symbol.asyncIterator]?t:ku(t)?Es(t):{[Symbol.asyncIterator]:async function*(){yield t}},Bu=t=>typeof ReadableStream=="function"?xs(t):t,ku=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,Pu=!1,_u=!1,rn=new Set,$u=(t,e=bt)=>{if(!rn.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else rn.add(t)},Cs=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Nu=t=>Cs(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Fu=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const n=typeof e=="function"?await e():e,s=Nu(n);return $u(s),s},useFipsEndpoint:async()=>{const n=typeof e=="string"?e:await e();return Cs(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Uu=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),nn="content-length";function Lu(t){return e=>async r=>{const n=r.request;if(B.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(nn)===-1)try{const o=t(s);n.headers={...n.headers,[nn]:String(o)}}catch{}}return e({...r,request:n})}}const Hu={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},zu=t=>({applyToStack:e=>{e.add(Lu(t.bodyLengthChecker),Hu)}}),ju=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Gu(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Ju(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},qu=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Wu=/(\d+\.){3}\d+/,Vu=/\.\./,Ju=t=>qu.test(t)&&!Wu.test(t)&&!Vu.test(t),Gu=t=>{const[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},Ku=(t,e,r)=>{const n=async()=>{const s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},Ts=async t=>{},As=t=>typeof t=="object"?"url"in t?ht(t.url):t:ht(t),Xu=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await Ts(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(As(o)),r.isCustomEndpoint=!0)}const s=await Qu(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},Qu=async(t,e,r)=>{const n={},s=e?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=t[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await Ku(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await ju(n),n},Zu=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&ta(n,"ENDPOINT_OVERRIDE","N");const i=await Xu(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;const o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const c=ve(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},Yu={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ji.name},el=(t,e)=>({applyToStack:r=>{r.addRelativeTo(Zu({config:t,instructions:e}),Yu)}}),tl=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>As(await te(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:te(n??!1),useFipsEndpoint:te(s??!1)});let c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=Ts(t.serviceId)),c),a};var Ae;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Ae||(Ae={}));const mt=3,rl=Ae.STANDARD,nl=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],sl=["TimeoutError","RequestTimeout","RequestTimeoutException"],il=[500,502,503,504],ol=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],al=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],cl=t=>t?.$retryable!==void 0,ul=t=>t.$metadata?.clockSkewCorrected,ll=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Rs=t=>t.$metadata?.httpStatusCode===429||nl.includes(t.name)||t.$retryable?.throttling==!0,fr=(t,e=0)=>cl(t)||ul(t)||sl.includes(t.name)||ol.includes(t?.code||"")||al.includes(t?.code||"")||il.includes(t.$metadata?.httpStatusCode||0)||ll(t)||t.cause!==void 0&&e<=10&&fr(t.cause,e+1),dl=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!fr(t)}return!1};class hr{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>hr.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Rs(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Qt=100,vs=20*1e3,fl=500,sn=500,hl=5,pl=10,ml=1,gl="amz-sdk-invocation-id",yl="amz-sdk-request",wl=()=>{let t=Qt;return{computeNextBackoffDelay:n=>Math.floor(Math.min(vs,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},on=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(vs,t),getRetryCost:()=>r});class Ds{maxAttempts;mode=Ae.STANDARD;capacity=sn;retryBackoffStrategy=wl();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return on({retryDelay:Qt,retryCount:0})}async refreshRetryTokenForRetry(e,r){const n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?fl:Qt);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,on({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(sn,this.capacity+(e.getRetryCost()??ml))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${mt}`),mt}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?pl:hl}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Sl{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ae.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;const{rateLimiter:n}=r??{};this.rateLimiter=n??new hr,this.standardRetryStrategy=new Ds(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const bl=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),El=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=te(n??mt);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await te(r)()===Ae.ADAPTIVE?new Sl(s):new Ds(s))})},xl=t=>t?.body instanceof ReadableStream,Cl=t=>(e,r)=>async n=>{let s=await t.retryStrategy();const i=await t.maxAttempts();if(Tl(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0;const{request:l}=n,d=B.isInstance(l);for(d&&(l.headers[gl]=sr());;)try{d&&(l.headers[yl]=`attempt=${c+1}; max=${i}`);const{response:h,output:p}=await e(n);return s.recordSuccess(o),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=u,{response:h,output:p}}catch(h){const p=Al(h);if(a=bl(h),d&&xl(l))throw(r.logger instanceof gs?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();const f=o.getRetryDelay();u+=f,await new Promise(y=>setTimeout(y,f))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},Tl=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Al=t=>{const e={error:t,errorType:Rl(t)},r=Ol(t.$response);return r&&(e.retryAfterHint=r),e},Rl=t=>Rs(t)?"THROTTLING":fr(t)?"TRANSIENT":dl(t)?"SERVER_ERROR":"CLIENT_ERROR",vl={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Dl=t=>({applyToStack:e=>{e.add(Cl(t),vl)}}),Ol=t=>{if(!me.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},Ml=async(t,e,r)=>({operation:ve(e).operation,region:await te(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Il(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Bl(t){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:e,filepath:r,configFilepath:n,ignoreCache:s},i)=>({identityProperties:{profile:e,filepath:r,configFilepath:n,ignoreCache:s}})}}const kl=t=>{const e=[];switch(t.operation){default:e.push(Il(t)),e.push(Bl())}return e},Pl=t=>{const e=Gn(t.token,Jn,cr),r=hc(t);return Object.assign(r,{authSchemePreference:te(t.authSchemePreference??[]),token:e})},_l=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),$l={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Nl="3.948.0",Fl={version:Nl};var Os={name:"SHA-256"},an={name:"HMAC",hash:Os},Ul=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const Ll={};function it(){return typeof window<"u"?window:typeof self<"u"?self:Ll}var Hl=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!Xt(e)){var r=Ve(e),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return it().crypto.subtle.sign(an,r,e.toHash).then(function(n){return new Uint8Array(n)})}):Xt(this.toHash)?Promise.resolve(Ul):Promise.resolve().then(function(){return it().crypto.subtle.digest(Os,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){it().crypto.subtle.importKey("raw",Ve(e.secret),an,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},t})(),U=64,zl=32,jl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ql=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Wl=Math.pow(2,53)-1,ot=(function(){function t(){this.state=Int32Array.from(ql),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=e.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Wl)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[r++],n--,this.bufferLength===U&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%U>=U-8){for(var s=this.bufferLength;s<U;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<U-8;s++)r.setUint8(s,0);r.setUint32(U-8,Math.floor(e/4294967296),!0),r.setUint32(U-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(zl),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,n=e.state,s=n[0],i=n[1],o=n[2],a=n[3],c=n[4],u=n[5],l=n[6],d=n[7],h=0;h<U;h++){if(h<16)this.temp[h]=(r[h*4]&255)<<24|(r[h*4+1]&255)<<16|(r[h*4+2]&255)<<8|r[h*4+3]&255;else{var p=this.temp[h-2],f=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[h-15];var y=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[h]=(f+this.temp[h-7]|0)+(y+this.temp[h-16]|0)}var g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&l)|0)+(d+(jl[h]+this.temp[h]|0)|0)|0,w=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;d=l,l=u,u=c,c=a+g|0,a=o,o=i,i=s,s=g+w|0}n[0]+=s,n[1]+=i,n[2]+=o,n[3]+=a,n[4]+=c,n[5]+=u,n[6]+=l,n[7]+=d},t})(),Vl=(function(){function t(e){this.secret=e,this.hash=new ot,this.reset()}return t.prototype.update=function(e){if(!(Xt(e)||this.error))try{this.hash.update(Ve(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Jc(this,void 0,void 0,function(){return Gc(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new ot,this.secret){this.outer=new ot;var e=Jl(this.secret),r=new Uint8Array(U);r.set(e);for(var n=0;n<U;n++)e[n]^=54,r[n]^=92;this.hash.update(e),this.outer.update(r);for(var n=0;n<e.byteLength;n++)e[n]=0}},t})();function Jl(t){var e=Ve(t);if(e.byteLength>U){var r=new ot;r.update(e),e=r.digest()}var n=new Uint8Array(U);return n.set(e),n}var Gl=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Kl(t){if(Xl(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return Ql(e)}return!1}function Xl(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function Ql(t){return t&&Gl.every(function(e){return typeof t[e]=="function"})}var Zl=(function(){function t(e){Kl(it())?this.hash=new Hl(e):this.hash=new Vl(e)}return t.prototype.update=function(e,r){this.hash.update(Ve(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const Yl=({serviceId:t,clientVersion:e})=>async r=>{const n=typeof window<"u"?window.navigator:void 0,s=n?.userAgent??"",i=n?.userAgentData?.platform??cn.os(s)??"other",o=void 0,a=n?.userAgentData?.brands??[],c=a[a.length-1],u=c?.brand??cn.browser(s)??"unknown",l=c?.version??"unknown",d=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,o],["lang/js"],["md/browser",`${u}_${l}`]];t&&d.push([`api/${t}`,e]);const h=await r?.userAgentAppId?.();return h&&d.push([`app/${h}`]),d},cn={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}},ed=t=>()=>Promise.reject(t),td=["in-region","cross-region","mobile","standard","legacy"],rd=({defaultsMode:t}={})=>La(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(nd()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${td.join(", ")}, got ${e}`)}}),nd=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:r,downlink:n}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(r)>100||Number(n)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1},Ms="required",X="fn",Q="argv",Oe="ref",un=!0,ln="isSet",Je="booleanEquals",be="error",Pe="endpoint",I="tree",pr="PartitionResult",dn={[Ms]:!1,type:"string"},fn={[Ms]:!0,default:!1,type:"boolean"},hn={[Oe]:"Endpoint"},Is={[X]:Je,[Q]:[{[Oe]:"UseFIPS"},!0]},Bs={[X]:Je,[Q]:[{[Oe]:"UseDualStack"},!0]},J={},pn={[X]:"getAttr",[Q]:[{[Oe]:pr},"supportsFIPS"]},mn={[X]:Je,[Q]:[!0,{[X]:"getAttr",[Q]:[{[Oe]:pr},"supportsDualStack"]}]},gn=[Is],yn=[Bs],wn=[{[Oe]:"Region"}],sd={parameters:{Region:dn,UseDualStack:fn,UseFIPS:fn,Endpoint:dn},rules:[{conditions:[{[X]:ln,[Q]:[hn]}],rules:[{conditions:gn,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:be},{rules:[{conditions:yn,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:be},{endpoint:{url:hn,properties:J,headers:J},type:Pe}],type:I}],type:I},{rules:[{conditions:[{[X]:ln,[Q]:wn}],rules:[{conditions:[{[X]:"aws.partition",[Q]:wn,assign:pr}],rules:[{conditions:[Is,Bs],rules:[{conditions:[{[X]:Je,[Q]:[un,pn]},mn],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:J,headers:J},type:Pe}],type:I}],type:I},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:be}],type:I},{conditions:gn,rules:[{conditions:[{[X]:Je,[Q]:[pn,un]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:J,headers:J},type:Pe}],type:I}],type:I},{error:"FIPS is enabled but this partition does not support FIPS",type:be}],type:I},{conditions:yn,rules:[{conditions:[mn],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:J,headers:J},type:Pe}],type:I}],type:I},{error:"DualStack is enabled but this partition does not support DualStack",type:be}],type:I},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:J,headers:J},type:Pe}],type:I}],type:I}],type:I},{error:"Invalid Configuration: Missing Region",type:be}],type:I}]},id=sd,od=new ua({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),ad=(t,e={})=>od.get(t,()=>Da(id,{endpointParams:t,logger:e.logger}));ft.aws=os;const cd=t=>({apiVersion:"2023-09-30",base64Decoder:t?.base64Decoder??Te,base64Encoder:t?.base64Encoder??ye,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??ad,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??kl,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Ua},{schemeId:"smithy.api#httpBearerAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new na}],logger:t?.logger??new gs,protocol:t?.protocol??new Nc({defaultNamespace:"com.amazonaws.bedrockruntime"}),serviceId:t?.serviceId??"Bedrock Runtime",urlParser:t?.urlParser??ht,utf8Decoder:t?.utf8Decoder??ge,utf8Encoder:t?.utf8Encoder??De}),ud=t=>{const e=rd(t),r=()=>e().then(Sc),n=cd(t);return{...n,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??gc,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??Yl({serviceId:n.serviceId,clientVersion:Fl.version}),eventStreamPayloadHandlerProvider:t?.eventStreamPayloadHandlerProvider??Su,eventStreamSerdeProvider:t?.eventStreamSerdeProvider??Ou,maxAttempts:t?.maxAttempts??mt,region:t?.region??ed("Region is missing"),requestHandler:dr.create(t?.requestHandler??r,je.create(r)),retryMode:t?.retryMode??(async()=>(await r()).retryMode||rl),sha256:t?.sha256??Zl,streamCollector:t?.streamCollector??Un,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(Pu)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(_u))}},ld=t=>({setRegion(e){t.region=e},region(){return t.region}}),dd=t=>({region:t.region()}),fd=t=>{const e=t.httpAuthSchemes;let r=t.httpAuthSchemeProvider,n=t.credentials,s=t.token;return{setHttpAuthScheme(i){const o=e.findIndex(a=>a.schemeId===i.schemeId);o===-1?e.push(i):e.splice(o,1,i)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n},setToken(i){s=i},token(){return s}}},hd=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials(),token:t.token()}),pd=(t,e)=>{const r=Object.assign(ld(t),Tc(t),Mi(t),fd(t));return e.forEach(n=>n.configure(r)),Object.assign(t,dd(r),Ac(r),Ii(r),hd(r))};class md extends yc{config;constructor(...[e]){const r=ud(e||{});super(r),this.initConfig=r;const n=_l(r),s=ca(n),i=El(s),o=Fu(i),a=o,c=tl(a),u=Uu(c),l=Pl(u),d=Oi(l),h=Eu(d),p=pd(h,e?.extensions||[]);this.config=p,this.middlewareStack.use(fo(this.config)),this.middlewareStack.use(Vc(this.config)),this.middlewareStack.use(Dl(this.config)),this.middlewareStack.use(zu(this.config)),this.middlewareStack.use(_i(this.config)),this.middlewareStack.use(Fi(this.config)),this.middlewareStack.use(Hi(this.config)),this.middlewareStack.use(Vi(this.config,{httpAuthSchemeParametersProvider:Ml,identityProviderConfigProvider:async f=>new ra({"aws.auth#sigv4":f.credentials,"smithy.api#httpBearerAuth":f.token})})),this.middlewareStack.use(Zi(this.config))}destroy(){super.destroy()}}let N=class ks extends xe{constructor(e){super(e),Object.setPrototypeOf(this,ks.prototype)}},gd=class Ps extends N{name="AccessDeniedException";$fault="client";constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,Ps.prototype)}},yd=class _s extends N{name="InternalServerException";$fault="server";constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,_s.prototype)}},wd=class $s extends N{name="ThrottlingException";$fault="client";constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,$s.prototype)}},Sd=class Ns extends N{name="ValidationException";$fault="client";constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,Ns.prototype)}},bd=class Fs extends N{name="ConflictException";$fault="client";constructor(e){super({name:"ConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,Fs.prototype)}},Ed=class Us extends N{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,Us.prototype)}},xd=class Ls extends N{name="ServiceQuotaExceededException";$fault="client";constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Ls.prototype)}},Cd=class Hs extends N{name="ServiceUnavailableException";$fault="server";constructor(e){super({name:"ServiceUnavailableException",$fault:"server",...e}),Object.setPrototypeOf(this,Hs.prototype)}},Td=class zs extends N{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(e){super({name:"ModelErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,zs.prototype),this.originalStatusCode=e.originalStatusCode,this.resourceName=e.resourceName}},Ad=class js extends N{name="ModelNotReadyException";$fault="client";$retryable={};constructor(e){super({name:"ModelNotReadyException",$fault:"client",...e}),Object.setPrototypeOf(this,js.prototype)}},Rd=class qs extends N{name="ModelTimeoutException";$fault="client";constructor(e){super({name:"ModelTimeoutException",$fault:"client",...e}),Object.setPrototypeOf(this,qs.prototype)}},vd=class Ws extends N{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(e){super({name:"ModelStreamErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,Ws.prototype),this.originalStatusCode=e.originalStatusCode,this.originalMessage=e.originalMessage}};const Dd="Accept",Od="AccessDeniedException",Md="Body",Id="ConflictException",Vs="Content-Type",Bd="InvokeModel",kd="InvokeModelRequest",Pd="InvokeModelResponse",_d="InternalServerException",$d="ModelErrorException",Nd="ModelNotReadyException",Fd="ModelStreamErrorException",Ud="ModelTimeoutException",Ld="ResourceNotFoundException",Hd="ServiceQuotaExceededException",zd="ServiceUnavailableException",jd="ThrottlingException",qd="ValidationException",Wd="X-Amzn-Bedrock-GuardrailIdentifier",Vd="X-Amzn-Bedrock-GuardrailVersion",Js="X-Amzn-Bedrock-PerformanceConfig-Latency",Gs="X-Amzn-Bedrock-Service-Tier",Jd="X-Amzn-Bedrock-Trace",Gd="accept",Ks="body",Y="client",Xs="contentType",L="error",Kd="guardrailIdentifier",Xd="guardrailVersion",Qd="http",H="httpError",K="httpHeader",z="message",Zd="modelId",Yd="originalMessage",Qs="originalStatusCode",Zs="performanceConfigLatency",ef="resourceName",Ys="serviceTier",ei="server",ti="smithy.ts.sdk.synthetic.com.amazonaws.bedrockruntime",tf="trace",C="com.amazonaws.bedrockruntime";var ri=[0,C,Md,8,21],rf=[-3,C,Od,{[L]:Y,[H]:403},[z],[0]];R.for(C).registerError(rf,gd);var nf=[-3,C,Id,{[L]:Y,[H]:400},[z],[0]];R.for(C).registerError(nf,bd);var sf=[-3,C,_d,{[L]:ei,[H]:500},[z],[0]];R.for(C).registerError(sf,yd);var of=[3,C,kd,0,[Ks,Xs,Gd,Zd,tf,Kd,Xd,Zs,Ys],[[()=>ri,16],[0,{[K]:Vs}],[0,{[K]:Dd}],[0,1],[0,{[K]:Jd}],[0,{[K]:Wd}],[0,{[K]:Vd}],[0,{[K]:Js}],[0,{[K]:Gs}]]],af=[3,C,Pd,0,[Ks,Xs,Zs,Ys],[[()=>ri,16],[0,{[K]:Vs}],[0,{[K]:Js}],[0,{[K]:Gs}]]],cf=[-3,C,$d,{[L]:Y,[H]:424},[z,Qs,ef],[0,1,0]];R.for(C).registerError(cf,Td);var uf=[-3,C,Nd,{[L]:Y,[H]:429},[z],[0]];R.for(C).registerError(uf,Ad);var lf=[-3,C,Fd,{[L]:Y,[H]:424},[z,Qs,Yd],[0,1,0]];R.for(C).registerError(lf,vd);var df=[-3,C,Ud,{[L]:Y,[H]:408},[z],[0]];R.for(C).registerError(df,Rd);var ff=[-3,C,Ld,{[L]:Y,[H]:404},[z],[0]];R.for(C).registerError(ff,Ed);var hf=[-3,C,Hd,{[L]:Y,[H]:400},[z],[0]];R.for(C).registerError(hf,xd);var pf=[-3,C,zd,{[L]:ei,[H]:503},[z],[0]];R.for(C).registerError(pf,Cd);var mf=[-3,C,jd,{[L]:Y,[H]:429},[z],[0]];R.for(C).registerError(mf,wd);var gf=[-3,C,qd,{[L]:Y,[H]:400},[z],[0]];R.for(C).registerError(gf,Sd);var yf=[-3,ti,"BedrockRuntimeServiceException",0,[],[]];R.for(ti).registerError(yf,N);var wf=[9,C,Bd,{[Qd]:["POST","/model/{modelId}/invoke",200]},()=>of,()=>af];class Sf extends ms.classBuilder().ep($l).m(function(e,r,n,s){return[el(n,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").sc(wf).build(){}class bf{client;modelId="anthropic.claude-3-sonnet-20240229-v1:0";constructor(){this.client=new md({region:"us-east-1",credentials:{accessKeyId:"",secretAccessKey:""}})}async invokeClaudeWithJSON(e,r){try{const n={anthropic_version:"bedrock-2023-05-31",max_tokens:8192,temperature:.7,messages:[{role:"user",content:e}],...r&&{system:r}},s=new Sf({modelId:this.modelId,contentType:"application/json",accept:"application/json",body:JSON.stringify(n)});console.log("Invoking Claude Sonnet 3 via Bedrock...");const i=await this.client.send(s),o=JSON.parse(new TextDecoder().decode(i.body));return console.log("Response received successfully"),o}catch(n){throw console.error("Error invoking Bedrock:",n),new Error(`Bedrock invocation failed: ${n.message}`)}}extractTextFromResponse(e){return e.content&&e.content.length>0?e.content[0].text:""}async getJSONResponse(e,r){const n=`${e}

Please respond with valid JSON only, no additional text or explanation.`,s=await this.invokeClaudeWithJSON(n,r),i=this.extractTextFromResponse(s);try{return JSON.parse(i)}catch{throw console.error("Failed to parse JSON response:",i),new Error("Response was not valid JSON")}}}const Ef=new bf;function ni(t,e){return function(){return t.apply(e,arguments)}}const{toString:xf}=Object.prototype,{getPrototypeOf:mr}=Object,{iterator:xt,toStringTag:si}=Symbol,Ct=(t=>e=>{const r=xf.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),q=t=>(t=t.toLowerCase(),e=>Ct(e)===t),Tt=t=>e=>typeof e===t,{isArray:Me}=Array,Re=Tt("undefined");function Ge(t){return t!==null&&!Re(t)&&t.constructor!==null&&!Re(t.constructor)&&P(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ii=q("ArrayBuffer");function Cf(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ii(t.buffer),e}const Tf=Tt("string"),P=Tt("function"),oi=Tt("number"),Ke=t=>t!==null&&typeof t=="object",Af=t=>t===!0||t===!1,at=t=>{if(Ct(t)!=="object")return!1;const e=mr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(si in t)&&!(xt in t)},Rf=t=>{if(!Ke(t)||Ge(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},vf=q("Date"),Df=q("File"),Of=q("Blob"),Mf=q("FileList"),If=t=>Ke(t)&&P(t.pipe),Bf=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||P(t.append)&&((e=Ct(t))==="formdata"||e==="object"&&P(t.toString)&&t.toString()==="[object FormData]"))},kf=q("URLSearchParams"),[Pf,_f,$f,Nf]=["ReadableStream","Request","Response","Headers"].map(q),Ff=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xe(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Me(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{if(Ge(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,t[a],a,t)}}function ai(t,e){if(Ge(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const de=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ci=t=>!Re(t)&&t!==de;function Zt(){const{caseless:t,skipUndefined:e}=ci(this)&&this||{},r={},n=(s,i)=>{const o=t&&ai(r,i)||i;at(r[o])&&at(s)?r[o]=Zt(r[o],s):at(s)?r[o]=Zt({},s):Me(s)?r[o]=s.slice():(!e||!Re(s))&&(r[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Xe(arguments[s],n);return r}const Uf=(t,e,r,{allOwnKeys:n}={})=>(Xe(e,(s,i)=>{r&&P(s)?t[i]=ni(s,r):t[i]=s},{allOwnKeys:n}),t),Lf=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Hf=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},zf=(t,e,r,n)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&mr(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},jf=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},qf=t=>{if(!t)return null;if(Me(t))return t;let e=t.length;if(!oi(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Wf=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&mr(Uint8Array)),Vf=(t,e)=>{const n=(t&&t[xt]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Jf=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Gf=q("HTMLFormElement"),Kf=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Sn=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Xf=q("RegExp"),ui=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Xe(r,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(n[i]=o||s)}),Object.defineProperties(t,n)},Qf=t=>{ui(t,(e,r)=>{if(P(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(P(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Zf=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Me(t)?n(t):n(String(t).split(e)),r},Yf=()=>{},eh=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function th(t){return!!(t&&P(t.append)&&t[si]==="FormData"&&t[xt])}const rh=t=>{const e=new Array(10),r=(n,s)=>{if(Ke(n)){if(e.indexOf(n)>=0)return;if(Ge(n))return n;if(!("toJSON"in n)){e[s]=n;const i=Me(n)?[]:{};return Xe(n,(o,a)=>{const c=r(o,s+1);!Re(c)&&(i[a]=c)}),e[s]=void 0,i}}return n};return r(t,0)},nh=q("AsyncFunction"),sh=t=>t&&(Ke(t)||P(t))&&P(t.then)&&P(t.catch),li=((t,e)=>t?setImmediate:e?((r,n)=>(de.addEventListener("message",({source:s,data:i})=>{s===de&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),de.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",P(de.postMessage)),ih=typeof queueMicrotask<"u"?queueMicrotask.bind(de):typeof process<"u"&&process.nextTick||li,oh=t=>t!=null&&P(t[xt]),m={isArray:Me,isArrayBuffer:ii,isBuffer:Ge,isFormData:Bf,isArrayBufferView:Cf,isString:Tf,isNumber:oi,isBoolean:Af,isObject:Ke,isPlainObject:at,isEmptyObject:Rf,isReadableStream:Pf,isRequest:_f,isResponse:$f,isHeaders:Nf,isUndefined:Re,isDate:vf,isFile:Df,isBlob:Of,isRegExp:Xf,isFunction:P,isStream:If,isURLSearchParams:kf,isTypedArray:Wf,isFileList:Mf,forEach:Xe,merge:Zt,extend:Uf,trim:Ff,stripBOM:Lf,inherits:Hf,toFlatObject:zf,kindOf:Ct,kindOfTest:q,endsWith:jf,toArray:qf,forEachEntry:Vf,matchAll:Jf,isHTMLForm:Gf,hasOwnProperty:Sn,hasOwnProp:Sn,reduceDescriptors:ui,freezeMethods:Qf,toObjectSet:Zf,toCamelCase:Kf,noop:Yf,toFiniteNumber:eh,findKey:ai,global:de,isContextDefined:ci,isSpecCompliantForm:th,toJSONObject:rh,isAsyncFn:nh,isThenable:sh,setImmediate:li,asap:ih,isIterable:oh};function b(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}m.inherits(b,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:m.toJSONObject(this.config),code:this.code,status:this.status}}});const di=b.prototype,fi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{fi[t]={value:t}});Object.defineProperties(b,fi);Object.defineProperty(di,"isAxiosError",{value:!0});b.from=(t,e,r,n,s,i)=>{const o=Object.create(di);m.toFlatObject(t,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return b.call(o,a,c,r,n,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const ah=null;function Yt(t){return m.isPlainObject(t)||m.isArray(t)}function hi(t){return m.endsWith(t,"[]")?t.slice(0,-2):t}function bn(t,e,r){return t?t.concat(e).map(function(s,i){return s=hi(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function ch(t){return m.isArray(t)&&!t.some(Yt)}const uh=m.toFlatObject(m,{},null,function(e){return/^is[A-Z]/.test(e)});function At(t,e,r){if(!m.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=m.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!m.isUndefined(g[y])});const n=r.metaTokens,s=r.visitor||l,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&m.isSpecCompliantForm(e);if(!m.isFunction(s))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(m.isDate(f))return f.toISOString();if(m.isBoolean(f))return f.toString();if(!c&&m.isBlob(f))throw new b("Blob is not supported. Use a Buffer instead.");return m.isArrayBuffer(f)||m.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function l(f,y,g){let w=f;if(f&&!g&&typeof f=="object"){if(m.endsWith(y,"{}"))y=n?y:y.slice(0,-2),f=JSON.stringify(f);else if(m.isArray(f)&&ch(f)||(m.isFileList(f)||m.endsWith(y,"[]"))&&(w=m.toArray(f)))return y=hi(y),w.forEach(function(E,x){!(m.isUndefined(E)||E===null)&&e.append(o===!0?bn([y],x,i):o===null?y:y+"[]",u(E))}),!1}return Yt(f)?!0:(e.append(bn(g,y,i),u(f)),!1)}const d=[],h=Object.assign(uh,{defaultVisitor:l,convertValue:u,isVisitable:Yt});function p(f,y){if(!m.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(f),m.forEach(f,function(w,S){(!(m.isUndefined(w)||w===null)&&s.call(e,w,m.isString(S)?S.trim():S,y,h))===!0&&p(w,y?y.concat(S):[S])}),d.pop()}}if(!m.isObject(t))throw new TypeError("data must be an object");return p(t),e}function En(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function gr(t,e){this._pairs=[],t&&At(t,this,e)}const pi=gr.prototype;pi.append=function(e,r){this._pairs.push([e,r])};pi.toString=function(e){const r=e?function(n){return e.call(this,n,En)}:En;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function lh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mi(t,e,r){if(!e)return t;const n=r&&r.encode||lh;m.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(e,r):i=m.isURLSearchParams(e)?e.toString():new gr(e,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class xn{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){m.forEach(this.handlers,function(n){n!==null&&e(n)})}}const gi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dh=typeof URLSearchParams<"u"?URLSearchParams:gr,fh=typeof FormData<"u"?FormData:null,hh=typeof Blob<"u"?Blob:null,ph={isBrowser:!0,classes:{URLSearchParams:dh,FormData:fh,Blob:hh},protocols:["http","https","file","blob","url","data"]},yr=typeof window<"u"&&typeof document<"u",er=typeof navigator=="object"&&navigator||void 0,mh=yr&&(!er||["ReactNative","NativeScript","NS"].indexOf(er.product)<0),gh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yh=yr&&window.location.href||"http://localhost",wh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yr,hasStandardBrowserEnv:mh,hasStandardBrowserWebWorkerEnv:gh,navigator:er,origin:yh},Symbol.toStringTag,{value:"Module"})),M={...wh,...ph};function Sh(t,e){return At(t,new M.classes.URLSearchParams,{visitor:function(r,n,s,i){return M.isNode&&m.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function bh(t){return m.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Eh(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function yi(t){function e(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=r.length;return o=!o&&m.isArray(s)?s.length:o,c?(m.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!m.isObject(s[o]))&&(s[o]=[]),e(r,n,s[o],i)&&m.isArray(s[o])&&(s[o]=Eh(s[o])),!a)}if(m.isFormData(t)&&m.isFunction(t.entries)){const r={};return m.forEachEntry(t,(n,s)=>{e(bh(n),s,r,0)}),r}return null}function xh(t,e,r){if(m.isString(t))try{return(e||JSON.parse)(t),m.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Qe={transitional:gi,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=m.isObject(e);if(i&&m.isHTMLForm(e)&&(e=new FormData(e)),m.isFormData(e))return s?JSON.stringify(yi(e)):e;if(m.isArrayBuffer(e)||m.isBuffer(e)||m.isStream(e)||m.isFile(e)||m.isBlob(e)||m.isReadableStream(e))return e;if(m.isArrayBufferView(e))return e.buffer;if(m.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Sh(e,this.formSerializer).toString();if((a=m.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return At(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),xh(e)):e}],transformResponse:[function(e){const r=this.transitional||Qe.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(m.isResponse(e)||m.isReadableStream(e))return e;if(e&&m.isString(e)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?b.from(a,b.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:M.classes.FormData,Blob:M.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};m.forEach(["delete","get","head","post","put","patch"],t=>{Qe.headers[t]={}});const Ch=m.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Th=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||e[r]&&Ch[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},Cn=Symbol("internals");function _e(t){return t&&String(t).trim().toLowerCase()}function ct(t){return t===!1||t==null?t:m.isArray(t)?t.map(ct):String(t)}function Ah(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Rh=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zt(t,e,r,n,s){if(m.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!m.isString(e)){if(m.isString(n))return e.indexOf(n)!==-1;if(m.isRegExp(n))return n.test(e)}}function vh(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Dh(t,e){const r=m.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}let _=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(a,c,u){const l=_e(c);if(!l)throw new Error("header name must be a non-empty string");const d=m.findKey(s,l);(!d||s[d]===void 0||u===!0||u===void 0&&s[d]!==!1)&&(s[d||c]=ct(a))}const o=(a,c)=>m.forEach(a,(u,l)=>i(u,l,c));if(m.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(m.isString(e)&&(e=e.trim())&&!Rh(e))o(Th(e),r);else if(m.isObject(e)&&m.isIterable(e)){let a={},c,u;for(const l of e){if(!m.isArray(l))throw TypeError("Object iterator must return a key-value pair");a[u=l[0]]=(c=a[u])?m.isArray(c)?[...c,l[1]]:[c,l[1]]:l[1]}o(a,r)}else e!=null&&i(r,e,n);return this}get(e,r){if(e=_e(e),e){const n=m.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return Ah(s);if(m.isFunction(r))return r.call(this,s,n);if(m.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=_e(e),e){const n=m.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||zt(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(o){if(o=_e(o),o){const a=m.findKey(n,o);a&&(!r||zt(n,n[a],a,r))&&(delete n[a],s=!0)}}return m.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||zt(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return m.forEach(this,(s,i)=>{const o=m.findKey(n,i);if(o){r[o]=ct(s),delete r[i];return}const a=e?vh(i):String(i).trim();a!==i&&delete r[i],r[a]=ct(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return m.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&m.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[Cn]=this[Cn]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=_e(o);n[a]||(Dh(s,o),n[a]=!0)}return m.isArray(e)?e.forEach(i):i(e),this}};_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);m.reduceDescriptors(_.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});m.freezeMethods(_);function jt(t,e){const r=this||Qe,n=e||r,s=_.from(n.headers);let i=n.data;return m.forEach(t,function(a){i=a.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function wi(t){return!!(t&&t.__CANCEL__)}function Ie(t,e,r){b.call(this,t??"canceled",b.ERR_CANCELED,e,r),this.name="CanceledError"}m.inherits(Ie,b,{__CANCEL__:!0});function Si(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new b("Request failed with status code "+r.status,[b.ERR_BAD_REQUEST,b.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Oh(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Mh(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=n[i];o||(o=u),r[s]=c,n[s]=u;let d=i,h=0;for(;d!==s;)h+=r[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const p=l&&u-l;return p?Math.round(h*1e3/p):void 0}}function Ih(t,e){let r=0,n=1e3/e,s,i;const o=(u,l=Date.now())=>{r=l,s=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const l=Date.now(),d=l-r;d>=n?o(u,l):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-d)))},()=>s&&o(s)]}const gt=(t,e,r=3)=>{let n=0;const s=Mh(50,250);return Ih(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-n,u=s(c),l=o<=a;n=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},r)},Tn=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},An=t=>(...e)=>m.asap(()=>t(...e)),Bh=M.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,M.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(M.origin),M.navigator&&/(msie|trident)/i.test(M.navigator.userAgent)):()=>!0,kh=M.hasStandardBrowserEnv?{write(t,e,r,n,s,i,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];m.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),m.isString(n)&&a.push(`path=${n}`),m.isString(s)&&a.push(`domain=${s}`),i===!0&&a.push("secure"),m.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ph(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _h(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bi(t,e,r){let n=!Ph(e);return t&&(n||r==!1)?_h(t,e):e}const Rn=t=>t instanceof _?{...t}:t;function we(t,e){e=e||{};const r={};function n(u,l,d,h){return m.isPlainObject(u)&&m.isPlainObject(l)?m.merge.call({caseless:h},u,l):m.isPlainObject(l)?m.merge({},l):m.isArray(l)?l.slice():l}function s(u,l,d,h){if(m.isUndefined(l)){if(!m.isUndefined(u))return n(void 0,u,d,h)}else return n(u,l,d,h)}function i(u,l){if(!m.isUndefined(l))return n(void 0,l)}function o(u,l){if(m.isUndefined(l)){if(!m.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function a(u,l,d){if(d in e)return n(u,l);if(d in t)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l,d)=>s(Rn(u),Rn(l),d,!0)};return m.forEach(Object.keys({...t,...e}),function(l){const d=c[l]||s,h=d(t[l],e[l],l);m.isUndefined(h)&&d!==a||(r[l]=h)}),r}const Ei=t=>{const e=we({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=_.from(o),e.url=mi(bi(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),m.isFormData(r)){if(M.hasStandardBrowserEnv||M.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(m.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([l,d])=>{u.includes(l.toLowerCase())&&o.set(l,d)})}}if(M.hasStandardBrowserEnv&&(n&&m.isFunction(n)&&(n=n(e)),n||n!==!1&&Bh(e.url))){const c=s&&i&&kh.read(i);c&&o.set(s,c)}return e},$h=typeof XMLHttpRequest<"u",Nh=$h&&function(t){return new Promise(function(r,n){const s=Ei(t);let i=s.data;const o=_.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,l,d,h,p,f;function y(){p&&p(),f&&f(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function w(){if(!g)return;const E=_.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),A={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:E,config:t,request:g};Si(function(F){r(F),y()},function(F){n(F),y()},A),g=null}"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(n(new b("Request aborted",b.ECONNABORTED,t,g)),g=null)},g.onerror=function(x){const A=x&&x.message?x.message:"Network Error",D=new b(A,b.ERR_NETWORK,t,g);D.event=x||null,n(D),g=null},g.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const A=s.transitional||gi;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),n(new b(x,A.clarifyTimeoutError?b.ETIMEDOUT:b.ECONNABORTED,t,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&m.forEach(o.toJSON(),function(x,A){g.setRequestHeader(A,x)}),m.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),u&&([h,f]=gt(u,!0),g.addEventListener("progress",h)),c&&g.upload&&([d,p]=gt(c),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(l=E=>{g&&(n(!E||E.type?new Ie(null,t,g):E),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const S=Oh(s.url);if(S&&M.protocols.indexOf(S)===-1){n(new b("Unsupported protocol "+S+":",b.ERR_BAD_REQUEST,t));return}g.send(i||null)})},Fh=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,a();const l=u instanceof Error?u:this.reason;n.abort(l instanceof b?l:new Ie(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new b(`timeout ${e} of ms exceeded`,b.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>m.asap(a),c}},Uh=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},Lh=async function*(t,e){for await(const r of Hh(t))yield*Uh(r,e)},Hh=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},vn=(t,e,r,n)=>{const s=Lh(t,e);let i=0,o,a=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await s.next();if(u){a(),c.close();return}let d=l.byteLength;if(r){let h=i+=d;r(h)}c.enqueue(new Uint8Array(l))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},Dn=64*1024,{isFunction:nt}=m,zh=(({Request:t,Response:e})=>({Request:t,Response:e}))(m.global),{ReadableStream:On,TextEncoder:Mn}=m.global,In=(t,...e)=>{try{return!!t(...e)}catch{return!1}},jh=t=>{t=m.merge.call({skipUndefined:!0},zh,t);const{fetch:e,Request:r,Response:n}=t,s=e?nt(e):typeof fetch=="function",i=nt(r),o=nt(n);if(!s)return!1;const a=s&&nt(On),c=s&&(typeof Mn=="function"?(f=>y=>f.encode(y))(new Mn):async f=>new Uint8Array(await new r(f).arrayBuffer())),u=i&&a&&In(()=>{let f=!1;const y=new r(M.origin,{body:new On,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!y}),l=o&&a&&In(()=>m.isReadableStream(new n("").body)),d={stream:l&&(f=>f.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!d[f]&&(d[f]=(y,g)=>{let w=y&&y[f];if(w)return w.call(y);throw new b(`Response type '${f}' is not supported`,b.ERR_NOT_SUPPORT,g)})});const h=async f=>{if(f==null)return 0;if(m.isBlob(f))return f.size;if(m.isSpecCompliantForm(f))return(await new r(M.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(m.isArrayBufferView(f)||m.isArrayBuffer(f))return f.byteLength;if(m.isURLSearchParams(f)&&(f=f+""),m.isString(f))return(await c(f)).byteLength},p=async(f,y)=>{const g=m.toFiniteNumber(f.getContentLength());return g??h(y)};return async f=>{let{url:y,method:g,data:w,signal:S,cancelToken:E,timeout:x,onDownloadProgress:A,onUploadProgress:D,responseType:F,headers:vt,withCredentials:Ze="same-origin",fetchOptions:Sr}=Ei(f),br=e||fetch;F=F?(F+"").toLowerCase():"text";let Ye=Fh([S,E&&E.toAbortSignal()],x),Be=null;const ce=Ye&&Ye.unsubscribe&&(()=>{Ye.unsubscribe()});let Er;try{if(D&&u&&g!=="get"&&g!=="head"&&(Er=await p(vt,w))!==0){let ne=new r(y,{method:"POST",body:w,duplex:"half"}),Se;if(m.isFormData(w)&&(Se=ne.headers.get("content-type"))&&vt.setContentType(Se),ne.body){const[Dt,et]=Tn(Er,gt(An(D)));w=vn(ne.body,Dn,Dt,et)}}m.isString(Ze)||(Ze=Ze?"include":"omit");const W=i&&"credentials"in r.prototype,xr={...Sr,signal:Ye,method:g.toUpperCase(),headers:vt.normalize().toJSON(),body:w,duplex:"half",credentials:W?Ze:void 0};Be=i&&new r(y,xr);let re=await(i?br(Be,Sr):br(y,xr));const Cr=l&&(F==="stream"||F==="response");if(l&&(A||Cr&&ce)){const ne={};["status","statusText","headers"].forEach(Tr=>{ne[Tr]=re[Tr]});const Se=m.toFiniteNumber(re.headers.get("content-length")),[Dt,et]=A&&Tn(Se,gt(An(A),!0))||[];re=new n(vn(re.body,Dn,Dt,()=>{et&&et(),ce&&ce()}),ne)}F=F||"text";let vi=await d[m.findKey(d,F)||"text"](re,f);return!Cr&&ce&&ce(),await new Promise((ne,Se)=>{Si(ne,Se,{data:vi,headers:_.from(re.headers),status:re.status,statusText:re.statusText,config:f,request:Be})})}catch(W){throw ce&&ce(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new b("Network Error",b.ERR_NETWORK,f,Be),{cause:W.cause||W}):b.from(W,W&&W.code,f,Be)}}},qh=new Map,xi=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:s}=e,i=[n,s,r];let o=i.length,a=o,c,u,l=qh;for(;a--;)c=i[a],u=l.get(c),u===void 0&&l.set(c,u=a?new Map:jh(e)),l=u;return u};xi();const wr={http:ah,xhr:Nh,fetch:{get:xi}};m.forEach(wr,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Bn=t=>`- ${t}`,Wh=t=>m.isFunction(t)||t===null||t===!1;function Vh(t,e){t=m.isArray(t)?t:[t];const{length:r}=t;let n,s;const i={};for(let o=0;o<r;o++){n=t[o];let a;if(s=n,!Wh(n)&&(s=wr[(a=String(n)).toLowerCase()],s===void 0))throw new b(`Unknown adapter '${a}'`);if(s&&(m.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(Bn).join(`
`):" "+Bn(o[0]):"as no adapter specified";throw new b("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const Ci={getAdapter:Vh,adapters:wr};function qt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ie(null,t)}function kn(t){return qt(t),t.headers=_.from(t.headers),t.data=jt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ci.getAdapter(t.adapter||Qe.adapter,t)(t).then(function(n){return qt(t),n.data=jt.call(t,t.transformResponse,n),n.headers=_.from(n.headers),n},function(n){return wi(n)||(qt(t),n&&n.response&&(n.response.data=jt.call(t,t.transformResponse,n.response),n.response.headers=_.from(n.response.headers))),Promise.reject(n)})}const Ti="1.13.2",Rt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Rt[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Pn={};Rt.transitional=function(e,r,n){function s(i,o){return"[Axios v"+Ti+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new b(s(o," has been removed"+(r?" in "+r:"")),b.ERR_DEPRECATED);return r&&!Pn[o]&&(Pn[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};Rt.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Jh(t,e,r){if(typeof t!="object")throw new b("options must be an object",b.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const a=t[i],c=a===void 0||o(a,i,t);if(c!==!0)throw new b("option "+i+" must be "+c,b.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new b("Unknown option "+i,b.ERR_BAD_OPTION)}}const ut={assertOptions:Jh,validators:Rt},G=ut.validators;let pe=class{constructor(e){this.defaults=e||{},this.interceptors={request:new xn,response:new xn}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=we(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&ut.assertOptions(n,{silentJSONParsing:G.transitional(G.boolean),forcedJSONParsing:G.transitional(G.boolean),clarifyTimeoutError:G.transitional(G.boolean)},!1),s!=null&&(m.isFunction(s)?r.paramsSerializer={serialize:s}:ut.assertOptions(s,{encode:G.function,serialize:G.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ut.assertOptions(r,{baseUrl:G.spelling("baseURL"),withXsrfToken:G.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&m.merge(i.common,i[r.method]);i&&m.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),r.headers=_.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let l,d=0,h;if(!c){const f=[kn.bind(this),void 0];for(f.unshift(...a),f.push(...u),h=f.length,l=Promise.resolve(r);d<h;)l=l.then(f[d++],f[d++]);return l}h=a.length;let p=r;for(;d<h;){const f=a[d++],y=a[d++];try{p=f(p)}catch(g){y.call(this,g);break}}try{l=kn.call(this,p)}catch(f){return Promise.reject(f)}for(d=0,h=u.length;d<h;)l=l.then(u[d++],u[d++]);return l}getUri(e){e=we(this.defaults,e);const r=bi(e.baseURL,e.url,e.allowAbsoluteUrls);return mi(r,e.params,e.paramsSerializer)}};m.forEach(["delete","get","head","options"],function(e){pe.prototype[e]=function(r,n){return this.request(we(n||{},{method:e,url:r,data:(n||{}).data}))}});m.forEach(["post","put","patch"],function(e){function r(n){return function(i,o,a){return this.request(we(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}pe.prototype[e]=r(),pe.prototype[e+"Form"]=r(!0)});let Gh=class Ai{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,a){n.reason||(n.reason=new Ie(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Ai(function(s){e=s}),cancel:e}}};function Kh(t){return function(r){return t.apply(null,r)}}function Xh(t){return m.isObject(t)&&t.isAxiosError===!0}const tr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(tr).forEach(([t,e])=>{tr[e]=t});function Ri(t){const e=new pe(t),r=ni(pe.prototype.request,e);return m.extend(r,pe.prototype,e,{allOwnKeys:!0}),m.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return Ri(we(t,s))},r}const v=Ri(Qe);v.Axios=pe;v.CanceledError=Ie;v.CancelToken=Gh;v.isCancel=wi;v.VERSION=Ti;v.toFormData=At;v.AxiosError=b;v.Cancel=v.CanceledError;v.all=function(e){return Promise.all(e)};v.spread=Kh;v.isAxiosError=Xh;v.mergeConfig=we;v.AxiosHeaders=_;v.formToJSON=t=>yi(m.isHTMLForm(t)?new FormData(t):t);v.getAdapter=Ci.getAdapter;v.HttpStatusCode=tr;v.default=v;const{Axios:ip,AxiosError:op,CanceledError:ap,isCancel:cp,CancelToken:up,VERSION:lp,all:dp,Cancel:fp,isAxiosError:hp,spread:pp,toFormData:mp,AxiosHeaders:gp,HttpStatusCode:yp,formToJSON:wp,getAdapter:Sp,mergeConfig:bp}=v;class Qh{baseURL="https://api.open-meteo.com/v1";async getCurrentWeather(e,r){try{const s=(await v.get(`${this.baseURL}/forecast`,{params:{latitude:e,longitude:r,current:"temperature_2m,relative_humidity_2m,weather_code",temperature_unit:"celsius",timezone:"auto"}})).data.current;return{temperature:Math.round(s.temperature_2m),humidity:Math.round(s.relative_humidity_2m),weatherCode:s.weather_code,condition:this.getWeatherDescription(s.weather_code),timestamp:new Date}}catch(n){throw console.error("Weather API error:",n.message),new Error("Failed to get weather data")}}async getWeeklyForecast(e,r){try{const s=(await v.get(`${this.baseURL}/forecast`,{params:{latitude:e,longitude:r,daily:"temperature_2m_max,temperature_2m_min,weather_code,relative_humidity_2m_mean",temperature_unit:"celsius",timezone:"auto",forecast_days:7}})).data.daily,i=[];for(let o=0;o<s.time.length;o++){const a=s.temperature_2m_min[o],c=s.temperature_2m_max[o];i.push({date:s.time[o],tempMin:Math.round(a),tempMax:Math.round(c),avgTemp:Math.round((a+c)/2),humidity:Math.round(s.relative_humidity_2m_mean[o]),weatherCode:s.weather_code[o],condition:this.getWeatherDescription(s.weather_code[o])})}return i}catch(n){throw console.error("Forecast API error:",n.message),new Error("Failed to get forecast data")}}getWeatherDescription(e){return{0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Foggy",48:"Foggy",51:"Light drizzle",53:"Drizzle",55:"Heavy drizzle",61:"Light rain",63:"Rain",65:"Heavy rain",71:"Light snow",73:"Snow",75:"Heavy snow",77:"Snow grains",80:"Light showers",81:"Showers",82:"Heavy showers",85:"Light snow showers",86:"Snow showers",95:"Thunderstorm",96:"Thunderstorm with hail",99:"Thunderstorm with hail"}[e]||"Unknown"}isExtremeHeat(e){return e>35}isHumid(e){return e>70}async getMonthlyForecast(e,r,n=16,s=!1,i){return n===16?this.getWeeklyForecast(e,r):s&&i?this.getOpenWeatherMapForecast(e,r,i):this.getHybridForecast(e,r,n)}async getHybridForecast(e,r,n){const s=[];try{const o=(await v.get(`${this.baseURL}/forecast`,{params:{latitude:e,longitude:r,daily:"temperature_2m_max,temperature_2m_min,weather_code,relative_humidity_2m_mean",temperature_unit:"celsius",timezone:"auto",forecast_days:16}})).data.daily;for(let a=0;a<o.time.length;a++){const c=o.temperature_2m_min[a],u=o.temperature_2m_max[a];s.push({date:o.time[a],tempMin:Math.round(c),tempMax:Math.round(u),avgTemp:Math.round((c+u)/2),humidity:Math.round(o.relative_humidity_2m_mean[a]),weatherCode:o.weather_code[a],condition:this.getWeatherDescription(o.weather_code[a])})}if(n>16){const{detectClimateZone:a,generateSeasonalForecasts:c}=await $n(async()=>{const{detectClimateZone:p,generateSeasonalForecasts:f}=await import("./seasonal-climate-Cdm4nwpM.js");return{detectClimateZone:p,generateSeasonalForecasts:f}},[]),u=s.reduce((p,f)=>p+f.avgTemp,0)/s.length,l=a(e,u),d=new Date(s[s.length-1].date);d.setDate(d.getDate()+1),c(d,n-16,l).forEach(p=>{s.push({date:p.date,tempMin:p.tempMin,tempMax:p.tempMax,avgTemp:p.avgTemp,humidity:p.humidity,weatherCode:p.weatherCode,condition:p.condition})})}return s}catch(i){throw console.error("Hybrid forecast error:",i.message),new Error("Failed to get hybrid forecast")}}async getOpenWeatherMapForecast(e,r,n){try{const s=await v.get("https://api.openweathermap.org/data/2.5/forecast/climate",{params:{lat:e,lon:r,appid:n,units:"metric",cnt:30}}),i=[];return s.data.list.forEach(o=>{const a=o.temp.min,c=o.temp.max;i.push({date:new Date(o.dt*1e3).toISOString().split("T")[0],tempMin:Math.round(a),tempMax:Math.round(c),avgTemp:Math.round((a+c)/2),humidity:Math.round(o.humidity||60),weatherCode:this.convertOWMToWMO(o.weather[0].id),condition:o.weather[0].description})}),i}catch(s){throw console.error("OpenWeatherMap forecast error:",s.message),new Error("Failed to get premium weather forecast")}}convertOWMToWMO(e){return e>=200&&e<300?95:e>=300&&e<400?51:e>=500&&e<600?61:e>=600&&e<700?71:e===800?0:e===801?1:e===802?2:e>=803?3:1}}const Zh=new Qh,_n={usePremiumWeatherAPI:!1,openWeatherMapApiKey:void 0};class Yh{async generatePlans(e){try{console.log("Starting AI plan generation for",e.length,"devices");const r=await this.prepareAnalysisInput(e);console.log("Generating plans in 3-day chunks...");const n=[],s=r.analysisDays,i=3;for(let a=1;a<=s;a+=i){const c=Math.min(a+i-1,s);console.log(`Generating days ${a}-${c}...`);const u=this.buildChunkPrompt(r,a,c),l=await Ef.getJSONResponse(u,this.getSystemPrompt());n.push({startDay:a,endDay:c,data:l})}console.log("Combining chunks into complete plans...");const o=this.combineChunks(n,r);return console.log("AI plan generation complete"),o}catch(r){throw console.error("AI plan generation failed:",r),new Error(`Failed to generate AI plans: ${r.message}`)}}async prepareAnalysisInput(e){const r=Di();if(!r)throw new Error("No user profile found");if(!r.location)throw new Error("Location not set. Please set your location in the dashboard.");const n=30;console.log(`Fetching ${n}-day weather forecast...`);const s=await Zh.getMonthlyForecast(r.location.latitude,r.location.longitude,n,_n.usePremiumWeatherAPI,_n.openWeatherMapApiKey),i=r.devices.filter(a=>e.includes(a.id)).map(a=>({id:a.id,name:a.customName||a.originalName,type:a.deviceType,wattage:a.wattage,priority:a.priority,survey:a.survey}));if(i.length===0)throw new Error("No valid devices selected for analysis");const o=r.energyCosts?.preferredBudget||r.energyCosts?.monthlyCost||0;return{devices:i,userProfile:{householdSize:r.aboutUser?.householdSize||1,occupationType:r.aboutUser?.occupationType||"employed",homeType:r.aboutUser?.homeType||"apartment"},energyCosts:{averageMonthlyCost:r.energyCosts?.monthlyCost||0,pricePerKwh:r.energyCosts?.pricePerKwh||0,preferredBudget:o,currency:r.energyCosts?.currency||"USD",currencySymbol:r.energyCosts?.currencySymbol||"$"},location:{city:r.location.city,region:r.location.region,country:r.location.country,latitude:r.location.latitude,longitude:r.location.longitude,temperature:r.location.temperature,weatherDescription:r.location.weatherDescription},weatherForecast:s,analysisDays:n,weatherSource:"hybrid"}}getSystemPrompt(){return`You are an expert energy optimization AI assistant specializing in household energy management. Your role is to analyze home appliances, weather patterns, and user preferences to create personalized energy-saving plans.

Core Principles:
1. **Cost Efficiency**: Minimize electricity costs while maintaining functionality
2. **Environmental Impact**: Reduce pollution (CFCs, HFCs, noise, carbon emissions)
3. **User Comfort**: Consider household occupancy patterns and lifestyle
4. **Weather Intelligence**: Adapt schedules based on temperature, humidity, and forecasts
5. **Safety First**: Never suggest unsafe device usage patterns

Device Pollution Levels:
- **VERY HIGH**: Generators (-7 pts/hr) - Noise, CO emissions
- **HIGH**: Air Conditioners (-5 pts/hr), Heaters (-4 pts/hr) - CFCs/HFCs, GHGs
- **MEDIUM**: Refrigerators (-2 pts/hr), Washing Machines (-2 pts/hr)
- **LOW**: TVs (-0.5 pts/hr), LED Bulbs (-0.3 pts/hr), Fans (-0.5 pts/hr)

Your responses must be valid JSON only. No explanatory text before or after the JSON.`}buildChunkPrompt(e,r,n){const s=e.devices.map((o,a)=>`${a+1}. ${o.name} (${o.type}): ${o.wattage}W, Priority ${o.priority}, ${o.survey.hoursPerDay}hrs/day`).join(`
`),i=e.weatherForecast.slice(r-1,n);return`Generate energy plans for days ${r}-${n} (${n-r+1} days).

DEVICES: ${s}
WEATHER: ${JSON.stringify(i)}
BUDGET: ${e.energyCosts.currencySymbol}${e.energyCosts.preferredBudget||0}/month (${((e.energyCosts.preferredBudget||0)/30).toFixed(2)}/day max)

Generate 3 plans (costSaver, ecoMode, comfortBalance) with:

1. METRICS (calculate for full ${e.analysisDays} days):
   - costSaver: {"initialBudget": ${e.energyCosts.preferredBudget||0}, "optimizedBudget": <calculated>, "monthlySaving": <difference>}
   - ecoMode: {"initialEcoScore": 100, "optimizedEcoScore": <calculated 0-100>, "ecoImprovementPercentage": <improvement>, "monthlyCostCap": ${e.energyCosts.preferredBudget?e.energyCosts.preferredBudget*1.5:0}}
   - comfortBalance: {"optimized Budget": <calculated>, "budgetReductionPercentage": <percent>, "ecoFriendlyGainPercentage": <percent>}

2. dailySchedules: For days ${r}-${n}, simple array with date & device hours
3. dailyTips: dayNumber, 3-5 SHORT tips per day
4. smartAlerts: 3-5 brief alerts (only in LAST chunk for days 28-30)

Return ONLY this JSON:
{
  "costSaver": {"metrics":{...}, "dailySchedules":[...], "dailyTips":[...], "smartAlerts":[...]},
  "ecoMode": {"metrics":{...}, "dailySchedules":[...], "dailyTips":[...], "smartAlerts":[...]},
  "comfortBalance": {"metrics":{...}, "dailySchedules":[...], "dailyTips":[...], "smartAlerts":[...]}
}

Keep JSON COMPACT. NO explanations.`}combineChunks(e,r){const n=new Date,s=new Date(n);s.setDate(s.getDate()+30);const i={costSaver:{id:"cost-saver-plan",type:"cost",name:"Cost Saver",dailySchedules:[],dailyTips:[],smartAlerts:[],devices:r.devices.map(o=>o.id),metrics:{initialBudget:0,optimizedBudget:0,monthlySaving:0}},ecoMode:{id:"eco-mode-plan",type:"eco",name:"Eco Mode",dailySchedules:[],dailyTips:[],smartAlerts:[],devices:r.devices.map(o=>o.id),metrics:{initialEcoScore:0,optimizedEcoScore:0,ecoImprovementPercentage:0,monthlyCostCap:0}},comfortBalance:{id:"balanced-plan",type:"balance",name:"Comfort Balance",dailySchedules:[],dailyTips:[],smartAlerts:[],devices:r.devices.map(o=>o.id),metrics:{optimizedBudget:0,budgetReductionPercentage:0,ecoFriendlyGainPercentage:0}}};for(const o of e){const a=o.data;for(const c of["costSaver","ecoMode","comfortBalance"])a[c]&&(a[c].dailySchedules&&i[c].dailySchedules.push(...a[c].dailySchedules),a[c].dailyTips&&i[c].dailyTips.push(...a[c].dailyTips),a[c].smartAlerts&&i[c].smartAlerts.push(...a[c].smartAlerts),a[c].metrics&&(i[c].metrics=a[c].metrics))}for(const o of["costSaver","ecoMode","comfortBalance"])i[o].smartAlerts=[...new Set(i[o].smartAlerts)];return{costSaver:i.costSaver,ecoMode:i.ecoMode,comfortBalance:i.comfortBalance,generatedAt:n.toISOString(),validUntil:s.toISOString(),analysisDays:r.analysisDays,weatherSource:r.weatherSource}}buildPrompt(e){const r=e.devices.map((n,s)=>`${s+1}. ${n.name} (${n.type}): ${n.wattage}W, Priority: ${n.priority}, Usage: ${n.survey.hoursPerDay}hrs/day`).join(`
`);return`Generate three distinct ${e.analysisDays}-day energy optimization plans.

USER CONTEXT:
- Household: ${e.userProfile.householdSize} people, ${e.userProfile.homeType}
- Occupation: ${e.userProfile.occupationType}
- Location: ${e.location.city}, ${e.location.country}
- Current Temperature: ${e.location.temperature}C
- Average Monthly Cost: ${e.energyCosts.currencySymbol}${e.energyCosts.averageMonthlyCost}
- Preferred Budget: ${e.energyCosts.currencySymbol}${e.energyCosts.preferredBudget}
- Price per kWh: ${e.energyCosts.currencySymbol}${e.energyCosts.pricePerKwh}

DEVICES TO OPTIMIZE (${e.devices.length} total):
${r}

WEATHER FORECAST (${e.analysisDays} days):
First 16 days are accurate forecasts. ${e.analysisDays>16?"Days 17-30 use seasonal climate averages.":""}
${JSON.stringify(e.weatherForecast.slice(0,5),null,2)}... (showing first 5 days)

GENERATE 3 PLANS:

## PLAN 1: COST SAVER
**Objective**: Minimize costs within preferred budget
- Split ${e.energyCosts.currencySymbol}${e.energyCosts.preferredBudget||0} across ${e.analysisDays} days = ${((e.energyCosts.preferredBudget||0)/e.analysisDays).toFixed(2)} per day
- Schedule devices to NOT exceed daily budget
- Avoid AC on cool days, reduce lighting on bright days
- If employed, minimize daytime usage (9am-5pm)

**Required Metrics**:
{
  "initialBudget": ${e.energyCosts.preferredBudget||0},
  "optimizedBudget": <calculated total>,
  "monthlySaving": <initialBudget - optimizedBudget>
}

## PLAN 2: ECO MODE
**Objective**: Minimize environmental impact
- Drastically reduce high-pollution devices (ACs, heaters: 50-70% reduction)
- IGNORE user priority - eco takes precedence
- No AC when temp < 25C, no heater when temp > 20C
- Monthly cost MUST NOT exceed ${e.energyCosts.currencySymbol}${e.energyCosts.averageMonthlyCost}

**Eco Score** (0-100, start at 100):
- Deduct points based on usage  pollution level
- AC: -5/hr, Heater: -4/hr, Refrigerator: -2/hr, etc.

**Required Metrics**:
{
  "initialEcoScore": <baseline score>,
  "optimizedEcoScore": <after optimization>,
  "ecoImprovementPercentage": <percentage improvement>,
  "monthlyCostCap": ${e.energyCosts.averageMonthlyCost}
}

## PLAN 3: COMFORT BALANCE
**Objective**: Balance cost + environment + comfort
- 20-30% budget reduction from preferred
- 30-40% eco improvement
- Respect high priority devices (priority >= 3)
- Maintain comfort during peak hours

**Required Metrics**:
{
  "optimizedBudget": <calculated>,
  "budgetReductionPercentage": <% reduction>,
  "ecoFriendlyGainPercentage": <% eco improvement>
}

For EACH plan, provide:
1. Daily schedules for all ${e.analysisDays} days
2. Device usage hours and time windows per day
3. Peak usage periods based on weather
4. 5-8 smart alerts (tips, warnings, info)
5. **Daily tips** for notifications (one per day):
   - morningTip: Brief tip for 8:30 AM notification
   - deviceTips: 1-3 device-specific recommendations
   - weatherTip: Weather-based advice (if relevant)
   - savingOpportunity: Energy-saving action for the day

Example daily tip:
{
  "dayNumber": 1,
  "date": "2025-01-15",
  "morningTip": "Good morning! Today's plan saves $1.20. Check your schedule.",
  "deviceTips": [
    "Your AC will run 3 hrs less today due to cooler weather",
    "LED bulbs: Turn off when leaving for work"
  ],
  "weatherTip": "Mild 24C today - great day to skip the AC!",
  "savingOpportunity": "Shift TV usage to evening for better energy rates"
}

Return valid JSON matching this schema:
{
  "costSaver": { 
    "id": "...", 
    "type": "cost", 
    "name": "Cost Saver", 
    "metrics": {...}, 
    "dailySchedules": [...${e.analysisDays} days...], 
    "dailyTips": [...${e.analysisDays} tips...],
    "smartAlerts": [...], 
    "devices": ["dev_1", "dev_2"] 
  },
  "ecoMode": { ... },
  "comfortBalance": { ... },
  "generatedAt": "2025-01-15T10:00:00Z",
  "validUntil": "2025-02-15T10:00:00Z",
  "analysisDays": ${e.analysisDays},
  "weatherSource": "${e.analysisDays>16?"hybrid":"open-meteo"}"
}`}parseAIResponse(e,r){if(!e.costSaver||!e.ecoMode||!e.comfortBalance)throw new Error("AI response missing required plans");return{...e,generatedAt:new Date().toISOString(),validUntil:new Date(Date.now()+720*60*60*1e3).toISOString(),analysisDays:r.analysisDays,weatherSource:r.analysisDays>16?"hybrid":"open-meteo"}}}const ep=new Yh,Ep=Object.freeze(Object.defineProperty({__proto__:null,default:ep},Symbol.toStringTag,{value:"Module"}));export{Ep as a,ge as f,De as t};
